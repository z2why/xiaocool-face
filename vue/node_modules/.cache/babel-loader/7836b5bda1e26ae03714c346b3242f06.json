{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Sign\",\n\n  //  会议报名\n  data() {\n    return {\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      dialogTableVisible: false\n    };\n  },\n\n  created() {\n    //请求分页查询数据\n    this.user = JSON.parse(localStorage.getItem(\"user\"));\n    this.load();\n  },\n\n  methods: {\n    load() {\n      this.request.get(\"/AboutMeeting/signMeeting\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          code: this.code,\n          meetingId: 1,\n          userId: this.user.id\n        }\n      }).then(res => {\n        this.tableData = res;\n      });\n    },\n\n    MeetingDetail(row) {\n      this.form = row;\n      console.log(row);\n      this.dialogTableVisible = true;\n    },\n\n    handleSizeChange(pageSize) {\n      console.log(pageSize);\n      this.pageSize = pageSize;\n      this.load();\n    },\n\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n\n    signin(row) {\n      console.log(row);\n\n      if (row.stage === '2') {\n        this.$message.error(\"会议已结束！\");\n      } else {\n        this.$confirm('将于报名会议\"' + row.name + '\", 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          const from1 = {\n            meetingId: row.meetingId,\n            checkStatus: 1,\n            userId: this.user.id\n          }; //修改\n\n          this.request.post('/AboutMeeting', from1).then(res => {\n            if (res.code === '200') {\n              this.$message.success(\"报名成功\");\n              this.load();\n            } else {\n              this.$message.error(\"报名失败\");\n            }\n          });\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;EACAA,YADA;;EAEA;EACAC;IACA;MACAC,QADA;MAEAC,aAFA;MAGAC,UAHA;MAIAC,YAJA;MAKAC;IALA;EAOA,CAXA;;EAYAC;IACA;IACA;IACA;EAEA,CAjBA;;EAmBAC;IACAC;MACA,8CACA;QACAC;UACAN,qBADA;UAEAC,uBAFA;UAGAM,eAHA;UAIAC,YAJA;UAKAC;QALA;MADA,CADA,EAUAC,IAVA,CAUAC;QACA;MACA,CAZA;IAcA,CAhBA;;IAiBAC;MACA;MACAC;MACA;IACA,CArBA;;IAsBAC;MACAD;MACA;MACA;IACA,CA1BA;;IA2BAE;MACA;MACA;IACA,CA9BA;;IA+BAC;MACAH;;MACA;QACA;MACA,CAFA,MAGA;QACA;UACAI,uBADA;UAEAC,sBAFA;UAGAC;QAHA,GAIAT,IAJA,CAIA;UACA;YACAF,wBADA;YAEAY,cAFA;YAGAX;UAHA,EADA,CAMA;;UACA,0CACAC,IADA,CACAC;YACA;cACA;cACA;YACA,CAHA,MAGA;cACA;YACA;UACA,CARA;QASA,CApBA;MAqBA;IACA;;EA3DA;AAnBA","names":["name","data","user","tableData","pageNum","pageSize","dialogTableVisible","created","methods","load","params","code","meetingId","userId","then","res","MeetingDetail","console","handleSizeChange","handleCurrentChange","signin","confirmButtonText","cancelButtonText","type","checkStatus"],"sourceRoot":"src/views","sources":["Sign.vue"],"sourcesContent":["<template>\r\n  <div class=\"sign\">\r\n    <div STYLE=\"height: 80px;user-select: none\">\r\n    <h1>会议报名</h1>\r\n    </div>\r\n    <el-card>\r\n    <el-table :data=\"tableData\"    stripe style=\"width: 100%\">\r\n      <el-table-column fixed sortable prop=\"startDate\"  width=\"250\" label=\"开始时间\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"name\" width=\"auto\" min-width=\"200\"  align=\"center\" label=\"会议主题\"> </el-table-column>\r\n      <el-table-column prop=\"code\" label=\"会议号\" width=\"230\"> </el-table-column>\r\n\r\n      <el-table-column\r\n          prop=\"stage\" label=\"会议状态\" width=\"130\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag size=\"small\"  v-if=\"scope.row.stage === 0\"  >未开启</el-tag>\r\n          <el-tag size=\"small\" v-else-if=\"scope.row.stage === 1\" type=\"warn\" effect=\"dark\">进行中</el-tag>\r\n          <el-tag size=\"small\" v-else-if=\"scope.row.stage === 2\" type=\"info\" effect=\"dark\">已结束</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n\r\n\r\n      <el-table-column prop=\"city\" align=\"center\" width=\"250\" label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n        <el-button  v-model=\"scope.row.checkStatus\" type=\"text\" @click=\"signin(scope.row)\">报名会议</el-button>\r\n        <el-divider direction=\"vertical\"></el-divider>\r\n        <el-button type=\"text\"   @click=\"MeetingDetail(scope.row)\">会议详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n\r\n    </el-table>\r\n\r\n\r\n    <div style=\"margin: 10px 0;position: relative;left: 35%;padding-top: 10px\">\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-sizes=\"[10]\"\r\n          :page-size=\"pageSize\"\r\n          background\r\n          layout=\"  prev,sizes, pager, next, jumper\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    </el-card>\r\n\r\n    <el-dialog title=\"会议详情\"  :visible.sync=\"dialogTableVisible\">\r\n\r\n      <template slot-scope=\"scope\">\r\n\r\n        <!--form类型的会议详情-->\r\n        <div class=\"detail\">\r\n          <el-form :model=\"form\" label-width=\"130px\"   style=\"padding-right: 15px\" >\r\n            <el-form-item label=\"会议主题 :\" prop=\"name\">\r\n              <el-input readonly v-model=\"form.name\"  style=\"width: 55%;font-size: large\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"会议时间 :\" >\r\n              <el-col :span=\"5\" >\r\n                <el-date-picker\r\n                    readonly\r\n                    v-model=\"form.startDate\"\r\n                    type=\"datetime\"\r\n                >\r\n                </el-date-picker>\r\n              </el-col>\r\n              <el-col class=\"line\" :span=\"6\" style=\"position: relative;left:17%\" >  ——> </el-col>\r\n              <el-col :span=\"5\">\r\n                <el-date-picker\r\n                    readonly\r\n                    v-model=\"form.endDate\"\r\n                    type=\"datetime\"\r\n                >\r\n                </el-date-picker>\r\n              </el-col>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"会议号 :\" prop=\"code\" >\r\n              <el-input v-model=\"form.code\" style=\"width: 55%\"> </el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"审核情况 :\" prop=\"show\" >\r\n              <el-tag size=\"small\"  style=\"padding-left: 10px\" v-if=\"form.show === 0\" >未审核</el-tag>\r\n              <el-tag size=\"small\"   style=\"left: 14px;height: 36px;font-size:large;position: relative\" v-else-if=\"form.show === 1\" >已通过</el-tag>\r\n              <el-tag size=\"small\"  v-else-if=\"form.show === 2\" >未通过</el-tag>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"会议地址 :\" prop=\"address\">\r\n              <el-input v-model=\"form.address\" style=\"width: 75%\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"创建时间 :\" prop=\"code\">\r\n              <el-input v-model=\"form.createTime\" style=\"width: 45%\"> </el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"会议简介 :\" prop=\"address\" >\r\n              <div>\r\n                <div v-html=\"form.description\" style=\"left: 2%;position: relative; \"></div>\r\n              </div>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Sign\",\r\n//  会议报名\r\n  data() {\r\n    return {\r\n      user:{},\r\n      tableData: [],\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      dialogTableVisible:false,\r\n    };\r\n  },\r\n  created() {\r\n    //请求分页查询数据\r\n    this.user=  JSON.parse(localStorage.getItem(\"user\"))\r\n    this.load()\r\n\r\n  },\r\n\r\n  methods: {\r\n    load() {\r\n      this.request.get(\"/AboutMeeting/signMeeting\",\r\n          {\r\n            params: {\r\n              pageNum: this.pageNum,\r\n              pageSize: this.pageSize,\r\n              code: this.code,\r\n              meetingId:1,\r\n              userId:this.user.id\r\n            },\r\n\r\n          }).then(res => {\r\n            this.tableData = res\r\n          }\r\n      )\r\n    },\r\n    MeetingDetail(row){\r\n      this.form=row\r\n      console.log(row)\r\n      this.dialogTableVisible = true\r\n    },\r\n    handleSizeChange(pageSize) {\r\n      console.log(pageSize)\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n    signin(row) {\r\n      console.log(row)\r\n   if (row.stage==='2') {\r\n     this.$message.error(\"会议已结束！\")\r\n   }\r\n  else{\r\n  this.$confirm('将于报名会议\"' + row.name + '\", 是否继续?', '提示', {\r\n    confirmButtonText: '确定',\r\n    cancelButtonText: '取消',\r\n    type: 'warning'\r\n  }).then(() => {\r\n    const from1 = {\r\n      meetingId: row.meetingId,\r\n      checkStatus: 1,\r\n      userId:this.user.id\r\n    }\r\n    //修改\r\n    this.request.post('/AboutMeeting', from1)\r\n        .then(res => {\r\n          if (res.code === '200') {\r\n            this.$message.success(\"报名成功\")\r\n            this.load()\r\n          } else {\r\n            this.$message.error(\"报名失败\")\r\n          }\r\n        })\r\n  })\r\n  }\r\n    },\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nh1 {\r\n  font-weight: 400;\r\n  line-height: 60px;\r\n  font-size: 26px;\r\n}\r\n.el-tag--small {\r\n  height: 33px;\r\n  padding: 4px 9px;\r\n  line-height: 22px;\r\n  font-size: initial;\r\n}\r\n\r\n::v-deep .el-table__fixed {\r\n  height: 100% !important;\r\n\r\n}\r\n::v-deep .detail .el-input__inner {\r\n  border: 1px solid #ffffff;\r\n  font-size: large;\r\n  font-family: 微软雅黑;\r\n  width: 245px;\r\n}\r\n::v-deep .el-input__inner:hover {\r\n  border-color: #ffffff;\r\n}\r\n::v-deep  .el-form-item__label {\r\n  font-size: large;\r\n}\r\n\r\n::v-deep .el-dialog__title {\r\n  line-height: 41px;\r\n  font-size: 20px;\r\n  padding-left: 10px;\r\n  color: #000000;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}