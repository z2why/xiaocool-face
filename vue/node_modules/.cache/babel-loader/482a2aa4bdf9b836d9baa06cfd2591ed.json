{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { VEmojiPicker } from 'v-emoji-picker';\nexport default {\n  name: 'Chat',\n  components: {\n    VEmojiPicker\n  },\n  props: {\n    client: {\n      type: Object,\n      default: null\n    },\n    receiveMsg: {\n      type: String,\n      require: false,\n      default: ''\n    }\n  },\n\n  data() {\n    return {\n      visible: false,\n      recText: '',\n      sendText: '',\n      editor: null,\n      toolbarConfig: {},\n      editorConfig: {\n        placeholder: '请输入内容...'\n      },\n      mode: 'default' // or 'simple'\n\n    };\n  },\n\n  watch: {\n    receiveMsg() {\n      this.receiveMsgHandle();\n    }\n\n  },\n  methods: {\n    selectEmoji(emoji) {\n      console.log(emoji);\n      var elInput = document.getElementById('emojiInput'); //获取输入框元素\n      // console.log(elInput);\n\n      var start = elInput.selectionStart; // 记录光标开始的位置\n\n      var end = elInput.selectionEnd; // 记录选中的字符 最后的字符的位置\n\n      if (start === undefined || end === undefined) return;\n      var txt = elInput.value; // 将表情添加到选中的光标位置\n\n      var result = txt.substring(0, start) + emoji.data + txt.substring(end);\n      elInput.value = result; // 赋值给input的value\n      // 重置光标位置\n\n      elInput.focus();\n      elInput.selectionStart = start + emoji.data.length;\n      elInput.selectionEnd = start + emoji.data.length;\n      console.log(result);\n      this.sendText = result; // 赋值(注意这里一定要赋值给表情输入框绑定的那个值)\n    },\n\n    receiveMsgHandle() {\n      this.recText += this.receiveMsg;\n    },\n\n    enterSearch() {\n      document.onkeydown = e => {\n        //13表⽰回车键，baseURI是当前页⾯的地址，为了更严谨，也可以加别的，可以打印e看⼀下\n        if (e.keyCode === 13 && e.target.baseURI.match(/theMeeting/)) {\n          //回车后执⾏搜索⽅法\n          this.$emit('chatEvent', this.sendText);\n        }\n      };\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AAEA;EACAA,YADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAG,cAFA;MAGAF;IAHA;EALA,CALA;;EAiBAG;IACA;MACAC,cADA;MAEAC,WAFA;MAGAC,YAHA;MAIAC,YAJA;MAKAC,iBALA;MAMAC;QAAAC;MAAA,CANA;MAOAC,eAPA,CAOA;;IAPA;EASA,CA3BA;;EA6BAC;IACAX;MACA;IACA;;EAHA,CA7BA;EAkCAY;IAEAC;MACAC;MACA,oDAFA,CAEA;MACA;;MACA,mCAJA,CAIA;;MACA,+BALA,CAKA;;MACA;MACA,wBAPA,CAQA;;MACA,aACAC,yDADA;MAEAC,uBAXA,CAWA;MACA;;MACAA;MACAA;MACAA;MACAF;MACA,uBAjBA,CAiBA;IAEA,CArBA;;IAsBAG;MACA;IACA,CAxBA;;IAyBAC;MACAC;QACA;QACA;UACA;UACA;QACA;MACA,CANA;IAOA;;EAjCA;AAlCA","names":["name","components","VEmojiPicker","props","client","type","default","receiveMsg","require","data","visible","recText","sendText","editor","toolbarConfig","editorConfig","placeholder","mode","watch","methods","selectEmoji","console","txt","elInput","receiveMsgHandle","enterSearch","document"],"sourceRoot":"src/views/meeting/components","sources":["Chat.vue"],"sourcesContent":["<template>\n  <div class=\"Chat-container\">\n    <el-input v-model=\"recText\" :rows=\"18.5\" type=\"textarea\" style=\"font-size: large\" readonly placeholder=\"还没有人聊天...\" />\n    <el-popover\n        ref=\"popverRef\"\n        trigger=\"click\"\n        v-model=\"visible\"\n    >\n      <!-- 触发事件 -->\n\n      <!-- 弹框内容 -->\n      <div class=\"div_content\" style=\"position: absolute;bottom: 1px\">\n        <VEmojiPicker @select=\"selectEmoji\" />\n      </div>\n    </el-popover>\n<!--    <el-button   slot=\"prepend\" type=\"text\" size=\"mini\"  @click=\"visible = !visible\">😊</el-button>-->\n    <el-input  id=\"emojiInput\" v-model=\"sendText\" placeholder=\"请输入内容\" maxlength=\"64\"  class=\"input-with-select\">\n      <el-button slot=\"prepend\" size=\"mini\"  @click=\"$emit('noticeEvent',sendText);visible = !visible\">😊</el-button>\n      <el-button slot=\"append\" size=\"mini\" icon=\"el-icon-s-promotion\" @click=\"$emit('chatEvent',sendText);sendText=''\" @keyup.enter=\"enterSearch(sendText)\" />\n    </el-input>\n\n\n  </div>\n</template>\n\n<script>\nimport { VEmojiPicker } from 'v-emoji-picker';\n\nexport default {\n  name: 'Chat',\n  components: {\n    VEmojiPicker\n  },\n  props: {\n    client: {\n      type: Object,\n      default: null\n    },\n    receiveMsg: {\n      type: String,\n      require: false,\n      default: ''\n    }\n  },\n\n  data() {\n    return {\n      visible: false,\n      recText: '',\n      sendText: '',\n      editor: null,\n      toolbarConfig: { },\n      editorConfig: { placeholder: '请输入内容...' },\n      mode: 'default', // or 'simple'\n    }\n  },\n\n  watch: {\n    receiveMsg() {\n      this.receiveMsgHandle()\n    }\n  },\n  methods: {\n\n    selectEmoji(emoji) {\n      console.log(emoji)\n      var elInput = document.getElementById('emojiInput')//获取输入框元素\n      // console.log(elInput);\n      var start = elInput.selectionStart // 记录光标开始的位置\n      var end = elInput.selectionEnd // 记录选中的字符 最后的字符的位置\n      if (start === undefined || end === undefined) return\n      var txt = elInput.value\n      // 将表情添加到选中的光标位置\n      var result =\n          txt.substring(0, start) + emoji.data + txt.substring(end)\n      elInput.value = result // 赋值给input的value\n      // 重置光标位置\n      elInput.focus()\n      elInput.selectionStart = start + emoji.data.length\n      elInput.selectionEnd = start + emoji.data.length\n      console.log(result)\n      this.sendText= result // 赋值(注意这里一定要赋值给表情输入框绑定的那个值)\n\n    },\n    receiveMsgHandle() {\n      this.recText += this.receiveMsg\n    },\n    enterSearch(){\n      document.onkeydown = e =>{\n        //13表⽰回车键，baseURI是当前页⾯的地址，为了更严谨，也可以加别的，可以打印e看⼀下\n        if (e.keyCode === 13 && e.target.baseURI.match(/theMeeting/)) {\n          //回车后执⾏搜索⽅法\n          this.$emit('chatEvent',this.sendText)\n        }\n      }\n    },\n\n\n  }\n}\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n::v-deep .el-popover{\n  padding: 0;\n\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}