{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as echarts from 'echarts';\nexport default {\n  name: \"tabCreate\",\n\n  data() {\n    return {\n      qwq: 1,\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      mid: '',\n      message: '数据导出',\n      message1: '数据导入',\n      meetingId: '',\n      tableData: [],\n      getData: [],\n      pageNum: 1,\n      pageSize: 6,\n      dialogTableVisible: false,\n      dialogTable: false,\n      dialogTables: false,\n      information: {},\n      Allnum: '',\n      Earlynum: '',\n      LATERnum: '',\n      Alrnum: ''\n    };\n  },\n\n  created() {\n    //请求分页查询数据\n    this.load();\n  },\n\n  methods: {\n    drawLine() {\n      let chartDom = document.getElementById('main');\n      let myChart = echarts.init(chartDom);\n      var option = {\n        title: {\n          text: '各季度会议展开情况',\n          size: 'large',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item'\n        },\n        xAxis: {\n          type: 'category',\n          data: [\"第一季度\", \"第二季度\", \"第三季度\", \"第四季度\"]\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          data: [],\n          type: 'line'\n        }, {\n          data: [],\n          type: 'bar'\n        }]\n      };\n      this.request.get(\"/echarts/members\").then(res => {\n        option.series[0].data = res.data;\n        option.series[1].data = res.data;\n        myChart.setOption(option);\n      });\n    },\n\n    drawBar() {\n      echarts.init(document.getElementById('pie'));\n      let myChart = echarts.init(document.getElementById('pie'));\n      const option = {\n        title: {\n          text: '该会议人员参会情况',\n          size: 'large',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'item'\n        },\n        legend: {\n          top: '5%',\n          left: 'center'\n        },\n        series: [{\n          name: '该会议人员参会情况',\n          type: 'pie',\n          radius: ['40%', '70%'],\n          avoidLabelOverlap: false,\n          itemStyle: {\n            borderRadius: 10,\n            borderColor: '#fff',\n            borderWidth: 2\n          },\n          label: {\n            show: false,\n            position: 'center'\n          },\n          emphasis: {\n            label: {\n              show: true,\n              fontSize: '40',\n              fontWeight: 'bold'\n            }\n          },\n          labelLine: {\n            show: false\n          },\n          data: []\n        }]\n      };\n      this.request.get(\"/echarts/hello\", {\n        params: {\n          meetingId: this.mid\n        }\n      }).then(res => {\n        option.series[0].data = res.data;\n        myChart.setOption(option);\n      });\n    },\n\n    open() {\n      const t = this;\n      setTimeout(() => {\n        //  执行echarts画图方法\n        t.drawBar();\n        t.drawLine();\n      }, 0);\n    },\n\n    handleExcelImportSuccess() {\n      this.$message.success(\"导入成功\");\n      this.load();\n    },\n\n    imp() {},\n\n    exp() {\n      this.downloadLoading = true;\n      const infos = this.getData;\n      import('@/utils/Export2Excel.js').then(excel => {\n        const tHeader = ['会议号', '用户编号', '用户姓名', '签到情况', '入会时间', '签退时间'];\n        const filterVal = ['code', 'userId', 'uname', 'participateStatus', 'signOutDate'];\n        console.log(this.mename);\n\n        for (let i = 0; i < this.getData.length; i++) {\n          //0未签到 1 已签到 2 迟到 3早退\n          if (this.getData[i].participateStatus === 0) {\n            infos[i].participateStatus = '未签到';\n          }\n\n          if (this.getData[i].participateStatus === 1) {\n            infos[i].participateStatus = '已签到';\n          }\n\n          if (this.getData[i].participateStatus === 2) {\n            infos[i].participateStatus = '迟到';\n          }\n\n          if (this.getData[i].participateStatus === 3) {\n            infos[i].participateStatus = '早退';\n          }\n        }\n\n        excel.export_json_to_excel2(tHeader, infos, filterVal, this.mename + '参会人员信息');\n        this.downloadLoading = false;\n      });\n    },\n\n    load() {\n      this.request.get(\"/AboutMeeting/findMeeting\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          code: this.code,\n          userId: this.user.id,\n          myMeeting: 1\n        }\n      }).then(res => {\n        this.tableData = res;\n      });\n    },\n\n    load() {\n      this.request.get(\"/meeting/MyMeeting/findCreate\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          createUser: this.user.id\n        }\n      }).then(res => {\n        this.tableData = res.data.records;\n        console.log(res);\n      });\n    },\n\n    MeetingInformation(row) {\n      console.log(row);\n      this.mid = row.id;\n      this.dialogTables = true;\n      this.request.get(\"/echarts\", {\n        params: {\n          meetingId: row.id\n        }\n      }).then(res => {\n        this.information = res.data;\n        this.meeting.meetingId = row.meetingId;\n      });\n    },\n\n    meetingHandle(row) {\n      if (row.stage === 0 && row.show === 1) {\n        this.$confirm('将于现在开启【' + row.name + '】会议, 是否确带继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.joinMeeting(row);\n          this.$message({\n            type: 'success',\n            showClose: true,\n            message: '已开启会议:' + row.name + '！' // const from1 = {\n            //   id: id,\n            //   stage: 1,\n            // }\n            //修改\n            // this.request.post('/meeting/MyMeeting', from1)\n            //     .then(res => {\n            //       this.$message({\n            //         showClose: true,\n            //         //message: res.msg,\n            //         message: res.code ? '已开启会议！' : res.msg,\n            //\n            //       }).catch(()=>{});\n            //       this.joinMeeting(id,name,status)\n            //\n            //\n            //\n            //     })\n\n          }).catch(() => {});\n        });\n      }\n    },\n\n    MeetingMember(row) {\n      this.dialogTable = true;\n      this.mename = row.name;\n      this.request.get(\"/AboutMeeting/findMember\", {\n        params: {\n          pageNum: 1,\n          pageSize: 100,\n          code: row.code\n        }\n      }).then(res => {\n        this.getData = res.data.records;\n        this.meetingId = row.id;\n      });\n    },\n\n    handleSizeChange(pageSize) {\n      console.log(pageSize);\n      this.pageSize = pageSize;\n      this.load();\n    },\n\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n\n    MeetingDetail(row) {\n      this.form = row;\n      this.dialogTableVisible = true;\n    },\n\n    // 开始会议\n    joinMeeting(row) {\n      if (row.status === 0) {\n        if (row.createUser === this.user.id) {\n          localStorage.setItem(\"meeting\", JSON.stringify(row)); // 存储用户信息到浏览器\n\n          this.$router.push(\"/AllSign\");\n        } else {\n          this.$message.success(\"您无权操作！\");\n        }\n      } else {\n        if (this.faceIn === 1) {\n          this.theface = true;\n          this.openPhoto();\n          console.log(this.faceIn);\n        }\n\n        if (this.faceIn === 0) {\n          this.dialogTable = true;\n          this.faceIn = 1;\n        }\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuPA;AAEA;EACAA,iBADA;;EAEAC;IACA;MACAC,MADA;MAEAC,kFAFA;MAGAC,OAHA;MAIAC,eAJA;MAKAC,gBALA;MAMAC,aANA;MAOAC,aAPA;MAQAC,WARA;MASAC,UATA;MAUAC,WAVA;MAWAC,yBAXA;MAYAC,kBAZA;MAaAC,mBAbA;MAcAC,eAdA;MAeAC,UAfA;MAgBAC,YAhBA;MAiBAC,YAjBA;MAkBAC;IAlBA;EAoBA,CAvBA;;EAwBAC;IACA;IACA;EACA,CA3BA;;EA4BAC;IACAC;MACA;MACA;MACA;QACAC;UACAC,iBADA;UAEAC,aAFA;UAGAC;QAHA,CADA;QAMAC;UACAC;QADA,CANA;QASAC;UACAC,gBADA;UAEA7B;QAFA,CATA;QAaA8B;UACAD;QADA,CAbA;QAgBAE,SACA;UACA/B,QADA;UAEA6B;QAFA,CADA,EAKA;UACA7B,QADA;UAEA6B;QAFA,CALA;MAhBA;MA4BA;QACAG;QACAA;QACAC;MACA,CAJA;IAMA,CAtCA;;IAuCAC;MACAC;MACA;MACA;QACAb;UACAC,iBADA;UAEAC,aAFA;UAGAC;QAHA,CADA;QAMAC;UACAC;QADA,CANA;QASAS;UACAC,SADA;UAEAZ;QAFA,CATA;QAaAM,SACA;UACAhC,iBADA;UAEA8B,WAFA;UAGAS,sBAHA;UAIAC,wBAJA;UAKAC;YACAC,gBADA;YAEAC,mBAFA;YAGAC;UAHA,CALA;UAUAC;YACAC,WADA;YAEAC;UAFA,CAVA;UAcAC;YACAH;cACAC,UADA;cAEAG,cAFA;cAGAC;YAHA;UADA,CAdA;UAqBAC;YACAL;UADA,CArBA;UAwBA7C;QAxBA,CADA;MAbA;MA0CA,mCACA;QACAmD;UACA7C;QADA;MADA,CADA,EAKA8C,IALA,CAKAC;QAEArB;QACAC;MACA,CATA;IAUA,CA9FA;;IAgGAqB;MACA;MACAC;QACA;QACAC;QACAA;MAGA,CANA,EAMA,CANA;IAOA,CAzGA;;IA0GAC;MACA;MACA;IACA,CA7GA;;IA8GAC,OAEA,CAhHA;;IAmHAC;MACA;MACA;MACA;QACA;QACA;QACAC;;QACA;UACA;UACA;YACAC;UACA;;UACA;YACAA;UACA;;UACA;YACAA;UACA;;UACA;YACAA;UACA;QACA;;QACAC;QACA;MACA,CArBA;IAuBA,CA7IA;;IAiJAC;MACA;QACAZ;UACA1C,qBADA;UAEAC,uBAFA;UAGAsD,eAHA;UAIAC,oBAJA;UAKAC;QALA;MADA,GASAd,IATA,CASAC;QACA;MACA,CAXA;IAaA,CA/JA;;IAiKAU;MACA;QACAZ;UACA1C,qBADA;UAEAC,uBAFA;UAGAyD;QAHA;MADA,GAOAf,IAPA,CAOAC;QACA;QACAO;MACA,CAVA;IAYA,CA9KA;;IA+KAQ;MACAR;MACA;MACA;MACA;QACAT;UACA7C;QADA;MADA,GAKA8C,IALA,CAKAC;QACA;QACA;MACA,CARA;IAWA,CA9LA;;IAgMAgB;MACA;QACA;UACAC,uBADA;UAEAC,sBAFA;UAGA1C;QAHA,GAIAuB,IAJA,CAIA;UACA;UACA;YACAvB,eADA;YAEA2C,eAFA;YAGApE,kCAHA,CAIA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;;UArBA,GAsBAqE,KAtBA,CAsBA,QAtBA;QAyBA,CA/BA;MAiCA;IACA,CApOA;;IAqOAC;MAEA;MACA;MACA;QACAvB;UACA1C,UADA;UAEAC,aAFA;UAGAsD;QAHA;MADA,GAMAZ,IANA,CAMAC;QACA;QACA;MACA,CATA;IAYA,CArPA;;IAsPAsB;MACAf;MACA;MACA;IACA,CA1PA;;IA2PAgB;MACA;MACA;IACA,CA9PA;;IA+PAC;MACA;MACA;IACA,CAlQA;;IAuQA;IACAC;MACA;QACA;UACAC,qDADA,CACA;;UACA;QACA,CAHA,MAIA;UACA;QAEA;MACA,CATA,MAUA;QACA;UACA;UACA;UACAnB;QAEA;;QACA;UACA;UACA;QACA;MACA;IAEA;;EAhSA;AA5BA","names":["name","data","qwq","user","mid","message","message1","meetingId","tableData","getData","pageNum","pageSize","dialogTableVisible","dialogTable","dialogTables","information","Allnum","Earlynum","LATERnum","Alrnum","created","methods","drawLine","title","text","size","left","tooltip","trigger","xAxis","type","yAxis","series","option","myChart","drawBar","echarts","legend","top","radius","avoidLabelOverlap","itemStyle","borderRadius","borderColor","borderWidth","label","show","position","emphasis","fontSize","fontWeight","labelLine","params","then","res","open","setTimeout","t","handleExcelImportSuccess","imp","exp","console","infos","excel","load","code","userId","myMeeting","createUser","MeetingInformation","meetingHandle","confirmButtonText","cancelButtonText","showClose","catch","MeetingMember","handleSizeChange","handleCurrentChange","MeetingDetail","joinMeeting","localStorage"],"sourceRoot":"src/views","sources":["tabCreate.vue"],"sourcesContent":["<template>\r\n  <div CLASS=\"created\">\r\n    <el-table :data=\"tableData\"   stripe style=\"width: 100%\">\r\n      <el-table-column fixed prop=\"startDate\" label=\"开始时间\"  sortable>\r\n      </el-table-column>\r\n      <el-table-column prop=\"name\" label=\"会议主题\">\r\n        <template slot-scope=\"scope\">\r\n          <a @click=\"MeetingDetail(scope.row)\" style=\"color: #409eff;cursor:pointer;font-size: 20px\">{{scope.row.name}}</a>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"code\" label=\"会议号\" width=\"180\"> </el-table-column>\r\n\r\n      <el-table-column\r\n          prop=\"show\" label=\"审核状况\" width=\"180\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag size=\"small\"  v-if=\"scope.row.show === 0\"  type=\"info \" >未审核</el-tag>\r\n          <el-tag size=\"small\" v-else-if=\"scope.row.show === 1\"  >已通过</el-tag>\r\n          <el-tag size=\"small\" v-else-if=\"scope.row.show === 2\" type=\"warning\" effect=\"dark\">未通过</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n          prop=\"stage\" label=\"会议状态\" width=\"230\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag size=\"small\"  v-if=\"scope.row.stage === 0\"  >未开启</el-tag>\r\n          <el-tag size=\"small\" v-else-if=\"scope.row.stage === 1\" type=\"info\" effect=\"dark\">已结束</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"city\" align=\"center\" label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n\r\n              <el-button size=\"mini\" v-if=\"scope.row.stage===0\" slot=\"title\" plain\r\n                      style=\"margin-left: 5px;margin-right: 4px;\"   @click=\"meetingHandle(scope.row)\">开始会议\r\n              </el-button>\r\n\r\n          <el-button size=\"mini\" style=\"margin-right: 9px; margin-left: 14px;\"  v-if=\"scope.row.stage===1\" type=\"info\" plain disabled>已结束</el-button>\r\n\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n          <el-button style=\"padding-top: 20px;\" type=\"text\" @click=\"MeetingMember(scope.row)\">数据操作</el-button>\r\n          <el-divider direction=\"vertical\"></el-divider>\r\n          <el-button type=\"text\" @click=\"MeetingInformation(scope.row)\">数据统计</el-button>\r\n        </template>\r\n      </el-table-column>\r\n\r\n    </el-table>\r\n\r\n\r\n    <div style=\"margin: 10px 0;position: relative;left: 35%\">\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-sizes=\"[4, 6, 8]\"\r\n          :page-size=\"pageSize\"\r\n          background\r\n          layout=\"prev,sizes,  pager, next, jumper\"\r\n          >\r\n      </el-pagination>\r\n    </div>\r\n\r\n    <el-dialog title=\"会议详情\"  :visible.sync=\"dialogTableVisible\">\r\n\r\n      <template slot-scope=\"scope\">\r\n\r\n        <!--form类型的会议详情-->\r\n        <div class=\"detail\">\r\n          <el-form :model=\"form\" label-width=\"130px\"   style=\"padding-right: 15px\" >\r\n            <el-form-item label=\"会议主题 :\" prop=\"name\">\r\n              <el-input readonly v-model=\"form.name\"  style=\"width: 55%;font-size: large\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"会议时间 :\" >\r\n              <el-col :span=\"5\" >\r\n                <el-date-picker\r\n                    readonly\r\n                    v-model=\"form.startDate\"\r\n                    type=\"datetime\"\r\n                >\r\n                </el-date-picker>\r\n              </el-col>\r\n              <el-col class=\"line\" :span=\"5\" style=\"position: relative;left:12%\" >  ——> </el-col>\r\n              <el-col :span=\"5\">\r\n                <el-date-picker\r\n                    readonly\r\n                    v-model=\"form.endDate\"\r\n                    type=\"datetime\"\r\n                >\r\n                </el-date-picker>\r\n              </el-col>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"会议号 :\" prop=\"code\" >\r\n              <el-input v-model=\"form.code\" style=\"width: 55%\"> </el-input>\r\n            </el-form-item>\r\n\r\n\r\n            <el-form-item label=\"会议情况 :\" prop=\"status\" >\r\n              <el-tag size=\"small\"  v-if=\"form.status === 0\" style=\"left: 14px;height: 36px;font-size:large;position: relative\" >线下</el-tag>\r\n              <el-tag size=\"small\" v-else-if=\"form.status === 1\" style=\"left: 14px;height: 36px;font-size:large;position: relative\" >线上</el-tag>\r\n            </el-form-item>\r\n\r\n\r\n            <el-form-item label=\"审核情况 :\" prop=\"show\" >\r\n              <el-tag size=\"small\"  style=\"left: 14px;height: 36px;font-size:large;position: relative\" type=\"info\" v-if=\"form.show === 0\" >未审核</el-tag>\r\n              <el-tag size=\"small\"   style=\"left: 14px;height: 36px;font-size:large;position: relative\" v-else-if=\"form.show === 1\" >已通过</el-tag>\r\n              <el-tag size=\"small\" style=\"left: 14px;height: 36px;font-size:large;position: relative\" effect=\"dark\" type=\"info\" v-else-if=\"form.show === 2\" >未通过</el-tag>\r\n            </el-form-item>\r\n\r\n\r\n\r\n            <el-form-item label=\"会议地址 :\" prop=\"address\">\r\n              <el-input v-model=\"form.address\" style=\"width: 75%\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"创建时间 :\" prop=\"code\">\r\n              <el-input v-model=\"form.createTime\" style=\"width: 45%\"> </el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"会议简介 :\" prop=\"address\" >\r\n              <div>\r\n                <div v-html=\"form.description\" style=\"left: 2%;position: relative; \"></div>\r\n              </div>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n<!--参会人员-->\r\n    <div class=\"MeetingMember\">\r\n      <el-dialog title=\"数据操作\"  :visible.sync=\"dialogTable\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n              v-bind:title=\"message\"\r\n              style=\" position: absolute;  left: 13%;  top: 6%;\"\r\n              icon=\"el-icon-download\"\r\n              @click=\"exp()\" circle></el-button>\r\n\r\n          <el-upload :action='\"https://localhost:9091/AboutMeeting/import?meetingId=\"+meetingId' show-file-list=\"true\" accept=\"xlsx\" :on-success=\"handleExcelImportSuccess\" style=\"display: inline-block\">\r\n          <el-button\r\n              v-bind:title=\"message1\"\r\n              style=\" position: absolute;  left: 18%;  top: 6%;\"\r\n              icon=\"el-icon-upload2\"\r\n              circle></el-button>\r\n          </el-upload>\r\n\r\n          <el-table :data=\"getData\"   style=\"margin-bottom: 10px\">\r\n\r\n            <el-table-column\r\n                prop=\"code\" label=\"会议号\" width=\"100\" align=\"center\">\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"userId\" label=\"用户编号\" width=\"180\" align=\"center\">\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"uname\" label=\"用户姓名\" width=\"180\" align=\"center\">\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"participateStatus\" label=\"签到情况\" width=\"180\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-tag size=\"small\"  v-if=\"scope.row.participateStatus === 0\"  type=\"info \" >未签到</el-tag>\r\n                <el-tag size=\"small\" v-else-if=\"scope.row.participateStatus === 1\"  >已签到</el-tag>\r\n                <el-tag size=\"small\" v-else-if=\"scope.row.participateStatus === 2\" type=\"warning\" effect=\"dark\">迟到</el-tag>\r\n                <el-tag size=\"small\" v-else-if=\"scope.row.participateStatus === 3\" type=\"warning\" effect=\"dark\">早退</el-tag>\r\n              </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column\r\n                prop=\"signInDate\" label=\"参会时间\" width=\"250\" align=\"center\">\r\n\r\n            </el-table-column>\r\n\r\n                      <el-table-column\r\n                          prop=\"signOutDate\" label=\"签退时间\" width=\"300\" align=\"center\">\r\n                      </el-table-column>\r\n\r\n\r\n          </el-table>\r\n          <div style=\"margin-top: 10px;position: relative;left: 35%\">\r\n          </div>\r\n\r\n        </template>\r\n      </el-dialog>\r\n    </div>\r\n\r\n    <div CLASS=\"MeetingInformation\">\r\n      <el-dialog :title='\"数据明细\"+\"(\"+ information.Allnum +\")\"' @open=\"open()\" destroy-on-close :visible.sync=\"dialogTables\"  width=\"1100px\" >\r\n        <el-divider></el-divider>\r\n        <el-row :gutter=\"10\" style=\"margin-bottom: 60px\">\r\n          <el-col :span=\"6\">\r\n            <el-card>\r\n              <div style=\"color: #409eff\"><i class=\"el-icon-user\"></i>\r\n                参会人数\r\n              </div>\r\n              <div style=\"padding: 10px 0;text-align: center;font-weight: bold\">\r\n                {{information.Earlynum+information.Alrnum+information.LATERnum}}\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-card>\r\n              <div style=\"color: #409eff\"><icon class=\"el-icon-star-off\"> </icon>\r\n                签到人数\r\n              </div>\r\n              <div style=\"padding: 10px 0;text-align: center;font-weight: bold\">\r\n                {{information.Alrnum}}\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-card>\r\n              <div style=\"color: #409eff\"><i CLASS=\"el-icon-warning-outline\"></i>\r\n                迟到人数\r\n              </div>\r\n              <div style=\"padding: 10px 0;text-align: center;font-weight: bold\">\r\n                {{information.LATERnum}}\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-card>\r\n              <div style=\"color: #409eff\"><i CLASS=\"el-icon-circle-close\"></i>\r\n                早退人数\r\n              </div>\r\n              <div style=\"padding: 10px 0;text-align: center;font-weight: bold\">\r\n                {{information.Earlynum}}\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <div id=\"main\" style=\"width: 500px;height: 450px\"></div>\r\n          </el-col>\r\n          <el-col :span=\"10\">\r\n            <div id=\"pie\" style=\"width: 500px;height: 460px\"></div>\r\n          </el-col>\r\n        </el-row>\r\n      </el-dialog>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts'\r\n\r\nexport default {\r\n  name: \"tabCreate\",\r\n  data() {\r\n    return {\r\n      qwq:1,\r\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\r\n      mid:'',\r\n      message:'数据导出',\r\n      message1:'数据导入',\r\n      meetingId:'',\r\n      tableData: [],\r\n      getData:[],\r\n      pageNum: 1,\r\n      pageSize: 6,\r\n      dialogTableVisible:false,\r\n      dialogTable:false,\r\n      dialogTables:false,\r\n      information:{},\r\n      Allnum:'',\r\n      Earlynum:'',\r\n      LATERnum:'',\r\n      Alrnum:'',\r\n    };\r\n  },\r\n  created() {\r\n    //请求分页查询数据\r\n    this.load()\r\n  },\r\n  methods: {\r\n      drawLine() {\r\n        let chartDom = document.getElementById('main');\r\n        let myChart = echarts.init(chartDom);\r\n        var option = {\r\n          title:{\r\n            text:'各季度会议展开情况',\r\n            size:'large',\r\n            left: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'item'\r\n          },\r\n          xAxis: {\r\n            type: 'category',\r\n            data: [\"第一季度\",\"第二季度\",\"第三季度\",\"第四季度\"]\r\n          },\r\n          yAxis: {\r\n            type: 'value'\r\n          },\r\n          series: [\r\n            {\r\n              data: [],\r\n              type: 'line'\r\n            },\r\n            {\r\n              data: [],\r\n              type: 'bar'\r\n            }\r\n          ]\r\n        };\r\n\r\n        this.request.get(\"/echarts/members\").then(res=>{\r\n          option.series[0].data= res.data\r\n          option.series[1].data= res.data\r\n          myChart.setOption(option);\r\n        })\r\n\r\n      },\r\n      drawBar(){\r\n        echarts.init( document.getElementById('pie'));\r\n        let myChart = echarts.init(document.getElementById('pie'));\r\n        const option = {\r\n          title:{\r\n            text:'该会议人员参会情况',\r\n            size:'large',\r\n            left: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'item'\r\n          },\r\n          legend: {\r\n            top: '5%',\r\n            left: 'center'\r\n          },\r\n          series: [\r\n            {\r\n              name: '该会议人员参会情况',\r\n              type: 'pie',\r\n              radius: ['40%', '70%'],\r\n              avoidLabelOverlap: false,\r\n              itemStyle: {\r\n                borderRadius: 10,\r\n                borderColor: '#fff',\r\n                borderWidth: 2\r\n              },\r\n              label: {\r\n                show: false,\r\n                position: 'center'\r\n              },\r\n              emphasis: {\r\n                label: {\r\n                  show: true,\r\n                  fontSize: '40',\r\n                  fontWeight: 'bold'\r\n                }\r\n              },\r\n              labelLine: {\r\n                show: false\r\n              },\r\n              data:[]\r\n            }\r\n          ]\r\n        };\r\n        this.request.get(\"/echarts/hello\",\r\n            {\r\n              params: {\r\n                meetingId:this.mid\r\n              }}\r\n        ).then(res=>{\r\n\r\n          option.series[0].data= res.data\r\n          myChart.setOption(option);\r\n        })\r\n      },\r\n\r\n      open() {\r\n        const t = this;\r\n        setTimeout(() => {\r\n          //  执行echarts画图方法\r\n          t.drawBar();\r\n          t.drawLine();\r\n\r\n\r\n        },0)\r\n      },\r\n    handleExcelImportSuccess() {\r\n      this.$message.success(\"导入成功\")\r\n      this.load();\r\n    },\r\n    imp(){\r\n\r\n    },\r\n\r\n\r\n    exp(){\r\n      this.downloadLoading = true\r\n      const infos=this.getData\r\n      import('@/utils/Export2Excel.js').then(excel => {\r\n        const tHeader = ['会议号', '用户编号', '用户姓名', '签到情况', '入会时间','签退时间']\r\n        const filterVal = ['code', 'userId', 'uname', 'participateStatus', 'signOutDate']\r\n        console.log(this.mename)\r\n        for (let i=0; i<this.getData.length; i++){\r\n          //0未签到 1 已签到 2 迟到 3早退\r\n          if (this.getData[i].participateStatus===0){\r\n            infos[i].participateStatus='未签到'\r\n          }\r\n          if (this.getData[i].participateStatus===1){\r\n            infos[i].participateStatus='已签到'\r\n          }\r\n          if (this.getData[i].participateStatus===2){\r\n            infos[i].participateStatus='迟到'\r\n          }\r\n          if (this.getData[i].participateStatus===3){\r\n            infos[i].participateStatus='早退'\r\n          }\r\n        }\r\n        excel.export_json_to_excel2(tHeader,infos, filterVal, this.mename+'参会人员信息')\r\n        this.downloadLoading = false\r\n      })\r\n\r\n    },\r\n\r\n\r\n\r\n    load() {\r\n      this.request.get(\"/AboutMeeting/findMeeting\", {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          code: this.code,\r\n          userId: this.user.id,\r\n          myMeeting:1\r\n        }\r\n\r\n      }).then(res => {\r\n            this.tableData = res\r\n          }\r\n      )\r\n    },\r\n\r\n    load() {\r\n      this.request.get(\"/meeting/MyMeeting/findCreate\", {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          createUser: this.user.id\r\n        }\r\n\r\n      }).then(res => {\r\n            this.tableData = res.data.records\r\n        console.log(res)\r\n          }\r\n      )\r\n    },\r\n    MeetingInformation(row){\r\n        console.log(row)\r\n      this.mid=row.id\r\n      this.dialogTables = true\r\n      this.request.get(\"/echarts\",{\r\n        params:{\r\n          meetingId:row.id\r\n\r\n        }\r\n      }).then(res =>{\r\n            this.information=res.data\r\n            this.meeting.meetingId=row.meetingId\r\n          }\r\n      )\r\n\r\n    },\r\n\r\n    meetingHandle(row){\r\n      if (row.stage === 0 && row.show === 1) {\r\n          this.$confirm('将于现在开启【' + row.name + '】会议, 是否确带继续?', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }).then(() => {\r\n            this.joinMeeting(row);\r\n            this.$message({\r\n                       type:'success',\r\n                      showClose: true,\r\n                      message: '已开启会议:'+ row.name+'！'\r\n            // const from1 = {\r\n            //   id: id,\r\n            //   stage: 1,\r\n            // }\r\n            //修改\r\n            // this.request.post('/meeting/MyMeeting', from1)\r\n            //     .then(res => {\r\n            //       this.$message({\r\n            //         showClose: true,\r\n            //         //message: res.msg,\r\n            //         message: res.code ? '已开启会议！' : res.msg,\r\n            //\r\n            //       }).catch(()=>{});\r\n            //       this.joinMeeting(id,name,status)\r\n            //\r\n            //\r\n            //\r\n            //     })\r\n          }).catch(()=>{})\r\n\r\n\r\n          })\r\n\r\n        }\r\n    },\r\n    MeetingMember(row){\r\n\r\n      this.dialogTable = true\r\n      this.mename=row.name\r\n      this.request.get(\"/AboutMeeting/findMember\", {\r\n        params: {\r\n          pageNum: 1,\r\n          pageSize: 100,\r\n          code:row.code\r\n        }\r\n      }).then(res => {\r\n        this.getData = res.data.records\r\n        this.meetingId=row.id\r\n          }\r\n      )\r\n\r\n    },\r\n    handleSizeChange(pageSize) {\r\n      console.log(pageSize)\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n    MeetingDetail(row){\r\n      this.form=row\r\n      this.dialogTableVisible = true\r\n    },\r\n\r\n\r\n\r\n\r\n    // 开始会议\r\n    joinMeeting(row){\r\n      if (row.status===0){\r\n        if (row.createUser===this.user.id){\r\n          localStorage.setItem(\"meeting\", JSON.stringify(row))  // 存储用户信息到浏览器\r\n          this.$router.push(\"/AllSign\")\r\n        }\r\n        else {\r\n          this.$message.success(\"您无权操作！\")\r\n\r\n        }\r\n      }\r\n      else {\r\n        if(this.faceIn===1){\r\n          this.theface=true\r\n          this.openPhoto()\r\n          console.log(this.faceIn)\r\n\r\n        }\r\n        if(this.faceIn===0){\r\n          this.dialogTable=true\r\n          this.faceIn=1\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n.el-tag--small {\r\n  height: 33px;\r\n  padding: 4px 9px;\r\n  line-height: 22px;\r\n  font-size: initial;\r\n}\r\n\r\n::v-deep .el-table__fixed {\r\n  height: 100% !important;\r\n\r\n}\r\n::v-deep .detail .el-input__inner {\r\n  border: 1px solid #ffffff;\r\n  font-size: large;\r\n  font-family: 微软雅黑;\r\n  width: 245px;\r\n}\r\n::v-deep .el-input__inner:hover {\r\n  border-color: #ffffff;\r\n}\r\n::v-deep  .el-form-item__label {\r\n  font-size: large;\r\n}\r\n\r\n::v-deep .el-dialog__title {\r\n  line-height: 41px;\r\n  font-size: 20px;\r\n  padding-left: 10px;\r\n  color: #000000;\r\n}\r\n\r\n::v-deep .MeetingMember  .el-dialog__body {\r\n  padding: 3px 20px 10px 43px;\r\n}\r\n::v-deep .MeetingInformation .el-dialog__body {\r\n  padding-top:0;\r\n}\r\n::v-deep .el-submenu.is-opened>.el-submenu__title .el-submenu__icon-arrow{\r\n  display: none;\r\n\r\n}\r\n\r\n::v-deep .el-submenu>.el-submenu__title .el-submenu__icon-arrow{\r\n  display: none;\r\n}\r\n\r\n\r\n\r\n::v-deep .el-menu--horizontal > .el-submenu .el-submenu__title{\r\n padding: 0;\r\n}\r\n\r\n\r\n\r\n::v-deep .el-menu--horizontal > .el-submenu .el-submenu__title:hover {\r\n  background-color: transparent ;\r\n\r\n}\r\n.el-menu::after, .el-menu::before {\r\n  display: table;\r\n  content: none;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}