{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from \"moment\";\nimport { Editor, Toolbar } from '@wangeditor/editor-for-vue';\nexport default {\n  name: \"ScheduledMeeting\",\n  components: {\n    Editor,\n    Toolbar\n  },\n\n  data() {\n    return {\n      // serverIp: serverIp,\n      rules: {\n        startDate: [{\n          required: true,\n          message: '请选择会议开始时间',\n          trigger: 'blur'\n        }],\n        name: [{\n          required: true,\n          message: '请输入会议名称',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '长度在 3 到 20 个字符',\n          trigger: 'blur'\n        }],\n        time: [{\n          type: 'date',\n          required: true,\n          message: '请选择日期',\n          trigger: 'change'\n        }]\n      },\n      dialogVisible: false,\n      editor: null,\n      toolbarConfig: {},\n      editorConfig: {\n        placeholder: ''\n      },\n      mode: 'default',\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      form: {}\n    };\n  },\n\n  methods: {\n    async getUser() {\n      return (await this.request.get(\"/user/username/\" + this.user.username)).data;\n    },\n\n    onCreated(editor) {\n      this.editor = Object.seal(editor); // 一定要用 Object.seal() ，否则会报错\n    },\n\n    save() {\n      console.log(this.form);\n\n      if (this.form.name !== undefined && this.form.status !== undefined) {\n        const random = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\n        var code = '';\n        const rdm = [5, 6];\n\n        for (let i = 0; i < rdm[Math.floor(Math.random() * 2)]; i++) {\n          let index = Math.floor(Math.random() * 9);\n          code += random[index];\n        }\n\n        this.form.code = code;\n        this.form.startDate = moment(this.form.startDate).format(\"YYYY-MM-DD HH:mm:ss\");\n        this.form.endDate = moment(this.form.endDate).format(\"YYYY-MM-DD HH:mm:ss\");\n        this.form.createTime = moment().startOf('millisecond').format(\"YYYY-MM-DD HH:mm:ss\");\n        console.log(this.form.code);\n        this.form.createUser = this.user.id;\n        this.request.post(\"/meeting/MyMeeting\", this.form).then(res => {\n          if (res.code === '200') {\n            this.$message.success(\"保存成功\");\n          } else {\n            this.$message.error(\"保存失败\");\n          }\n        });\n      } else {\n        this.$message.error(\"请输入信息！\");\n      }\n    }\n\n  },\n\n  mounted() {// 模拟 ajax 请求，异步渲染编辑器\n    // setTimeout(() => {\n    //   this.form.description = '<p>'+this.meeting.description+'</p>'\n    // }, 1500)\n  },\n\n  beforeDestroy() {\n    const editor = this.editor;\n    if (editor == null) return;\n    editor.destroy(); // 组件销毁时，及时销毁编辑器\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;EACAA,wBADA;EAEAC;IAAAC;IAAAC;EAAA,CAFA;;EAGAC;IAEA;MACA;MAEAC;QACAC;UAAAC;UAAAC;UAAAC;QAAA,EADA;QAGAT,OACA;UAAAO;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAC;UAAAH;UAAAC;QAAA,CAFA,CAHA;QAQAG,OACA;UAAAC;UAAAN;UAAAC;UAAAC;QAAA,CADA;MARA,CAHA;MAeAK,oBAfA;MAgBAC,YAhBA;MAiBAC,iBAjBA;MAkBAC;QAAAC;MAAA,CAlBA;MAmBAC,eAnBA;MAoBAC,kFApBA;MAqBAC;IArBA;EAwBA,CA7BA;;EA+BAC;IACA;MACA;IACA,CAHA;;IAIAC;MACA,kCADA,CACA;IACA,CANA;;IAQAC;MACAC;;MACA;QACA;QACA;QACA;;QACA;UACA;UACAC;QACA;;QACA;QACA;QACA;QACA;QACAD;QACA;QACA;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA,CANA;MAMA,CApBA,MAqBA;QACA;MACA;IACA;;EAlCA,CA/BA;;EAoEAE,WACA;IACA;IACA;IACA;EACA,CAzEA;;EA0EAC;IACA;IACA;IACAb,iBAHA,CAGA;EACA;;AA9EA","names":["name","components","Editor","Toolbar","data","rules","startDate","required","message","trigger","min","max","time","type","dialogVisible","editor","toolbarConfig","editorConfig","placeholder","mode","user","form","methods","onCreated","save","console","code","mounted","beforeDestroy"],"sourceRoot":"src/views","sources":["ScheduledMeeting.vue"],"sourcesContent":["<template>\r\n<!--申请会议-->\r\n  <div style=\"user-select: none;zoom: 0.8\" >\r\n    <div id=\"biaotou\">\r\n      <div style=\"height: 60px;user-select: none\">\r\n        <h1>预约会议</h1>\r\n      </div>\r\n      <el-divider></el-divider>\r\n    </div>\r\n\r\n    <el-card style=\"width: 1200px;\" >\r\n      <div style=\"padding: 15px;\">\r\n      <el-form :model=\"form\" label-width=\"140px\"   style=\"padding-right: 15px\" :rules=\"rules\">\r\n        <el-form-item label=\"会议主题 :\" prop=\"name\">\r\n          <el-input v-model=\"form.name\"  style=\"width: 50%;font-size: large\"></el-input>\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item label=\"会议时间 :\">\r\n          <el-date-picker\r\n              popper-class=\"thet\"\r\n              v-model=\"value1\"\r\n              type=\"datetimerange\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              :default-time=\"['12:00:00']\">\r\n          </el-date-picker>\r\n\r\n<!--          <el-col :span=\"5\" >-->\r\n<!--          <el-date-picker-->\r\n<!--              validate-event=\"true\"-->\r\n<!--              v-model=\"form.startDate\"-->\r\n<!--              type=\"datetime\"-->\r\n<!--              popper-class=\"t1\"-->\r\n<!--              placeholder=\"选择会议开始时间\">-->\r\n<!--          </el-date-picker>-->\r\n<!--          </el-col>-->\r\n<!--          <el-col class=\"line\" :span=\"2\" style=\"position: relative;left: 3%\" >  —— </el-col>-->\r\n<!--          <el-col :span=\"5\">-->\r\n<!--            <el-date-picker-->\r\n<!--                v-model=\"form.endDate\"-->\r\n<!--                type=\"datetime\"-->\r\n<!--                placeholder=\"选择会议结束时间\">-->\r\n<!--            </el-date-picker>-->\r\n<!--          </el-col>-->\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item label=\"会议类型 :\"  label-width=\"140px\"   prop=\"status\" required >\r\n          <el-radio-group v-model=\"form.status\" style=\"padding-right: 15px\" >\r\n            <el-radio :label=\"0\" >线上</el-radio>\r\n            <el-radio :label=\"1\">线下</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item label=\"会议地址 :\" prop=\"address\">\r\n          <el-input v-model=\"form.address\" style=\"width: 75%;font-size: large\"></el-input>\r\n        </el-form-item>\r\n\r\n\r\n        <el-form-item label=\"会议简介 : \" >\r\n          <div style=\"border: 1px solid #ccc;\">\r\n            <Editor\r\n                style=\"height: 230px; overflow-y: hidden;\"\r\n                v-model=\"form.description\"\r\n                :defaultConfig=\"editorConfig\"\r\n                :mode=\"mode\"\r\n                @onCreated=\"onCreated\"\r\n            />\r\n          </div>\r\n        </el-form-item>\r\n      <div STYLE=\" padding-left: 35%\">\r\n        <el-form-item >\r\n          <el-button @click=\"$router.push('/AddMeeting')\">返回</el-button>\r\n          <el-button type=\"primary\" @click=\"save\" style=\"position: relative;left: 30px\">预定会议</el-button>\r\n        </el-form-item>\r\n      </div>\r\n      </el-form >\r\n    </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport moment from \"moment\"\r\nimport { Editor, Toolbar } from '@wangeditor/editor-for-vue'\r\nexport default {\r\n  name: \"ScheduledMeeting\",\r\n  components: { Editor, Toolbar },\r\n  data() {\r\n\r\n    return {\r\n      // serverIp: serverIp,\r\n\r\n      rules:{\r\n        startDate:[{ required: true, message: '请选择会议开始时间', trigger: 'blur' }],\r\n\r\n        name: [\r\n          { required: true, message: '请输入会议名称', trigger: 'blur' },\r\n          { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\r\n\r\n        ],\r\n        time: [\r\n          { type: 'date', required: true, message: '请选择日期', trigger: 'change' }\r\n        ],\r\n      },\r\n      dialogVisible:false,\r\n      editor: null,\r\n      toolbarConfig: { },\r\n      editorConfig: { placeholder: '' },\r\n      mode: 'default',\r\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\r\n      form: {},\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    async getUser() {\r\n      return (await this.request.get(\"/user/username/\" + this.user.username)).data\r\n    },\r\n    onCreated(editor) {\r\n      this.editor = Object.seal(editor) // 一定要用 Object.seal() ，否则会报错\r\n    },\r\n\r\n    save() {\r\n      console.log(this.form)\r\n      if(this.form.name!==undefined&&this.form.status!==undefined){\r\n      const random = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n      var code = ''\r\n      const rdm=[5,6]\r\n      for (let i = 0; i <rdm[Math.floor(Math.random()*2)]; i++) {\r\n        let index = Math.floor(Math.random() * 9);\r\n        code += random[index];\r\n      }\r\n      this.form.code = code;\r\n      this.form.startDate=moment(this.form.startDate).format(\"YYYY-MM-DD HH:mm:ss\")\r\n      this.form.endDate=moment(this.form.endDate).format(\"YYYY-MM-DD HH:mm:ss\")\r\n      this.form.createTime=moment().startOf('millisecond').format(\"YYYY-MM-DD HH:mm:ss\")\r\n      console.log(this.form.code)\r\n      this.form.createUser=this.user.id\r\n      this.request.post(\"/meeting/MyMeeting\", this.form).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success(\"保存成功\")\r\n        } else {\r\n          this.$message.error(\"保存失败\")\r\n        }\r\n      })}\r\n      else{\r\n        this.$message.error(\"请输入信息！\")\r\n      }\r\n    },\r\n\r\n  },\r\n  mounted() {\r\n    // 模拟 ajax 请求，异步渲染编辑器\r\n    // setTimeout(() => {\r\n    //   this.form.description = '<p>'+this.meeting.description+'</p>'\r\n    // }, 1500)\r\n  },\r\n  beforeDestroy() {\r\n    const editor = this.editor\r\n    if (editor == null) return\r\n    editor.destroy() // 组件销毁时，及时销毁编辑器\r\n  },\r\n}\r\n</script>\r\n<style>\r\n.el-popper[x-placement^=bottom] .popper__arrow{\r\n  display: none;\r\n}\r\n.thet{\r\n  background-color: black;\r\n  margin-top: 100px;\r\n}\r\n</style>\r\n<style scoped>\r\n\r\nh1 {\r\n  font-weight: 400;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  font-size: 26px;\r\n}\r\n::v-deep .el-form-item__label{\r\n  font-size: large;\r\n  padding: 4px 24px 15px 4px;\r\n}\r\n\r\n\r\n::v-deep .el-radio__label{\r\n  font-size: 16px;\r\n}\r\n\r\n::v-deep .el-form-item__content{\r\n  line-height: 46px;\r\n}\r\n.avatar-uploader {\r\n  text-align: center;\r\n  padding-bottom: 10px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 138px;\r\n  height: 138px;\r\n  line-height: 138px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 138px;\r\n  height: 138px;\r\n  display: block;\r\n}\r\n/deep/ .el-form-item__error {\r\n  color: #E10000AD;\r\n  font-size: 14px;\r\n  top: 80%;\r\n}\r\n::v-deep .el-picker-panel__body{\r\n  margin-top: 100px;\r\n}\r\n\r\n</style>\r\n\r\n\r\n<style src=\"@wangeditor/editor/dist/css/style.css\"></style>"]},"metadata":{},"sourceType":"module"}