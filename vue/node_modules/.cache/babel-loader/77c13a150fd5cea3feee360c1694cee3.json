{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.join.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Head from \"@/components/Head\";\nimport Map from \"@/views/Map\";\nimport moment from \"moment\";\nimport vPinyin from '../../src/assets/js/vue-py';\nimport theMeeting from \"@/views/meeting/index\";\nexport default {\n  name: \"AddMeeting\",\n  components: {\n    Map: Map,\n    Head: Head,\n    theMeeting: theMeeting\n  },\n  children: [{\n    name: 'Map',\n    path: 'Map',\n    components: Map\n  }],\n  data: function data() {\n    return {\n      nowTime: new Date(),\n      // 当前时间\n      dialogTable: false,\n      meetingId: '',\n      form: '',\n      code: '',\n      uname: '',\n      faceIn: 1,\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\n    };\n  },\n  created: function created() {\n    this.enterSearch();\n  },\n  methods: {\n    check: function check() {},\n    back: function back() {\n      this.meetingId = '';\n      this.code = '';\n    },\n    sign: function sign() {\n      var _this = this;\n\n      var t1 = moment().startOf('millisecond').format(\"YYYY-MM-DD HH:mm:ss\");\n      console.log(this.form);\n      var form3 = {\n        id: this.form.udid,\n        meetingId: this.form.meetingId,\n        participateStatus: this.form.participateStatus,\n        userId: this.user.id\n      };\n      form3.signInDate = JSON.parse(JSON.stringify(t1)); // this.form.udid=form3.id\n\n      var t2 = moment(this.form.startDate).format(\"YYYY-MM-DD HH:mm:ss\");\n\n      if (t2 >= t1) {\n        form3.participateStatus = 1;\n      }\n\n      if (t2 < t1) {\n        form3.participateStatus = 2;\n      }\n\n      form3.signAdress = localStorage.getItem(\"location\");\n\n      if (this.form.participateStatus === 0) {\n        this.request.post(\"/AboutMeeting/manualSign\", form3).then(function (res) {\n          if (res.code === '200') {\n            _this.$message.success(\"签到成功\");\n\n            if (_this.form.createUser === _this.user.id) {\n              _this.$message.success(\"创建成功\");\n\n              _this.$router.push({\n                name: \"theMeeting\",\n                params: {\n                  meetingName: _this.form.mname,\n                  meetingId: _this.form.meetingId,\n                  roomId: _this.form.code,\n                  udid: _this.form.udid,\n                  qwq: 1\n                }\n              });\n            } else {\n              _this.$message.success(\"加入成功\");\n\n              _this.$router.push({\n                name: \"theMeeting\",\n                params: {\n                  meetingName: _this.form.mname,\n                  meetingId: _this.form.meetingId,\n                  udid: _this.form.udid,\n                  roomId: _this.form.code\n                }\n              });\n            } // this.form.checkStatus = 1\n\n          } else {\n            _this.$message.error(\"签到失败\");\n          }\n        });\n      } else {\n        this.$message.error(\"您已签到,请勿重复签到！\");\n\n        if (this.form.createUser === this.user.id) {\n          this.$message.success(\"创建成功\");\n          this.$router.push({\n            name: \"theMeeting\",\n            params: {\n              meetingName: this.form.mname,\n              meetingId: this.form.meetingId,\n              roomId: this.form.code,\n              udid: this.form.udid,\n              qwq: 1\n            }\n          });\n        } else {\n          this.$message.success(\"加入成功\");\n          this.$router.push({\n            name: \"theMeeting\",\n            params: {\n              meetingName: this.form.mname,\n              meetingId: this.form.meetingId,\n              udid: this.form.udid,\n              roomId: this.form.code\n            }\n          });\n        }\n      }\n    },\n    join: function join() {\n      var _this2 = this;\n\n      this.request.get(\"/AboutMeeting/join\", {\n        params: {\n          code: this.code,\n          userId: this.user.id\n        }\n      }).then(function (res) {\n        if (res.code === '200') {\n          _this2.form = res.data;\n          console.log(res.data);\n          _this2.meetingId = res.data.id;\n\n          if (res.data.mname === undefined) {\n            _this2.form.mname = res.data.name;\n            _this2.form.checkStatus = 0;\n          }\n\n          if (res.data.checkStatus === 0) {\n            _this2.$confirm('是否报名此次会议？', '您还未报名此会议', {\n              confirmButtonText: '确定',\n              cancelButtonText: '取消',\n              type: 'warning',\n              center: true\n            }).then(function () {\n              var from1 = {\n                // meetingId: res.data.meetingId,\n                checkStatus: 1,\n                userId: _this2.user.id\n              };\n\n              if (res.data.udid !== undefined) {\n                from1.id = res.data.udid;\n              }\n\n              if (res.data.meetingId !== undefined) {\n                from1.meetingId = res.data.meetingId;\n              }\n\n              if (res.data.meetingId === undefined) {\n                from1.meetingId = res.data.id;\n              }\n\n              _this2.request.post('/AboutMeeting', from1).then(function (res) {\n                if (res.code === '200') {\n                  _this2.$message.success(\"报名成功\");\n\n                  _this2.form.checkStatus = 1;\n                  res.checkStatus = 1;\n                } else {\n                  _this2.$message.error(\"报名失败\");\n                }\n              });\n            }).catch(function () {\n              _this2.$message({\n                type: 'info',\n                message: '已取消报名'\n              });\n            });\n          }\n        } else {\n          _this2.$message.error(\"会议号有误！\");\n        }\n      });\n    },\n    cback: function cback() {\n      this.dialogTable = false;\n    },\n    joinMeeting: function joinMeeting() {\n      var _this3 = this;\n\n      if (this.faceIn === 1) {\n        console.log(this.faceIn);\n        this.request.post(\"/AboutMeeting/face\").then(function (res) {\n          if (res.code === '200') {\n            var that = _this3;\n            setTimeout(function () {\n              var _this4 = this;\n\n              that.request.get(\"/AboutMeeting/UserName\").then(function (res) {\n                console.log(res.data);\n                console.log(vPinyin.chineseToPinYin(that.user.name));\n\n                if (res.data === vPinyin.chineseToPinYin(that.user.name)) {\n                  //签到信息\n                  var t1 = moment().startOf('millisecond').format(\"YYYY-MM-DD HH:mm:ss\");\n                  var form3 = {\n                    id: that.form.udid,\n                    meetingId: that.form.meetingId,\n                    userId: that.user.id\n                  };\n                  form3.signInDate = JSON.parse(JSON.stringify(t1)); // this.form.udid=form3.id\n\n                  var t2 = moment(that.form.startDate).format(\"YYYY-MM-DD HH:mm:ss\");\n\n                  if (t2 >= t1) {\n                    form3.participateStatus = 1;\n                  }\n\n                  if (t2 < t1) {\n                    form3.participateStatus = 2;\n                  }\n\n                  if (_this4.form.participateStatus === 0) {\n                    _this4.request.post(\"/AboutMeeting/manualSign\", form3).then(function (res) {\n                      if (res.code === '200') {\n                        that.$message.success(\"签到成功\");\n\n                        if (that.form.createUser === that.user.id) {\n                          that.$message.success(\"创建成功\");\n                          that.$router.push({\n                            name: \"theMeeting\",\n                            params: {\n                              meetingName: that.form.mname,\n                              meetingId: that.form.meetingId,\n                              roomId: that.form.code,\n                              udid: that.form.udid,\n                              qwq: 1\n                            }\n                          });\n                        } else {\n                          that.$message.success(\"加入成功\");\n                          that.$router.push({\n                            name: \"theMeeting\",\n                            params: {\n                              meetingName: that.form.mname,\n                              meetingId: that.form.meetingId,\n                              udid: that.form.udid,\n                              roomId: that.form.code\n                            }\n                          });\n                        }\n                      }\n                    });\n                  }\n                } else {\n                  that.$message.error(\"识别失败！即将进行手动签到\");\n                  that.faceIn = 0;\n\n                  if (that.faceIn === 0) {\n                    that.dialogTable = true;\n                    that.faceIn = 1;\n                  }\n                }\n              }); // 需要执行的代码\n            }, 4000);\n          } else {\n            _this3.$message.error(\"人脸识别异常！即将进行手动签到\");\n\n            _this3.faceIn = 0;\n\n            if (_this3.faceIn === 0) {\n              _this3.dialogTable = true;\n              _this3.faceIn = 1;\n            }\n          }\n        });\n      }\n\n      if (this.faceIn === 0) {\n        this.dialogTable = true;\n        this.faceIn = 1;\n      }\n    },\n    enterSearch: function enterSearch() {\n      var _this5 = this;\n\n      document.onkeydown = function (e) {\n        //13表⽰回车键，baseURI是当前页⾯的地址，为了更严谨，也可以加别的，可以打印e看⼀下\n        if (e.keyCode === 13 && e.target.baseURI.match(/AddMeeting/)) {\n          //回车后执⾏搜索⽅法\n          _this5.join();\n        }\n      };\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;EACAA,kBADA;EAEAC;IACAC,QADA;IAEAC,UAFA;IAGAC;EAHA,CAFA;EAQAC,WACA;IACAL,WADA;IAEAM,WAFA;IAGAL;EAHA,CADA,CARA;EAiBAM,IAjBA,kBAiBA;IACA;MACAC,mBADA;MACA;MACAC,kBAFA;MAGAC,aAHA;MAIAC,QAJA;MAKAC,QALA;MAMAC,SANA;MAOAC,SAPA;MAQAC;IARA;EAUA,CA5BA;EA6BAC,OA7BA,qBA6BA;IACA;EACA,CA/BA;EAgCAC;IACAC,KADA,mBACA,CACA,CAFA;IAGAC,IAHA,kBAGA;MACA;MACA;IACA,CANA;IAOAC,IAPA,kBAOA;MAAA;;MACA;MACAC;MACA;QACAC,kBADA;QAEAZ,8BAFA;QAGAa,8CAHA;QAIAC;MAJA;MAMAC,kDATA,CAUA;;MACA;;MACA;QACAA;MACA;;MACA;QACAA;MACA;;MACAA;;MACA;QACA,qDACAC,IADA,CACA;UAEA;YACA;;YACA;cACA;;cACA;gBACA1B,kBADA;gBAEA2B;kBACAC,6BADA;kBAEAlB,+BAFA;kBAGAmB,uBAHA;kBAIAC,qBAJA;kBAKAC;gBALA;cAFA;YAUA,CAZA,MAaA;cACA;;cACA;gBACA/B,kBADA;gBAEA2B;kBACAC,6BADA;kBAEAlB,+BAFA;kBAGAoB,qBAHA;kBAIAD;gBAJA;cAFA;YASA,CA1BA,CA2BA;;UACA,CA5BA,MA4BA;YACA;UACA;QACA,CAlCA;MAkCA,CAnCA,MAoCA;QAEA;;QACA;UACA;UACA;YACA7B,kBADA;YAEA2B;cACAC,4BADA;cAEAlB,8BAFA;cAGAmB,sBAHA;cAIAC,oBAJA;cAKAC;YALA;UAFA;QAUA,CAZA,MAaA;UACA;UACA;YACA/B,kBADA;YAEA2B;cACAC,4BADA;cAEAlB,8BAFA;cAGAoB,oBAHA;cAIAD;YAJA;UAFA;QASA;MACA;IAGA,CA7FA;IA8FAG,IA9FA,kBA8FA;MAAA;;MACA;QACAL;UACAf,eADA;UAEAY;QAFA;MADA,GAMAE,IANA,CAMA;QACA;UACA;UACAL;UACA;;UACA;YACA;YACA;UACA;;UACA;YACA;cACAY,uBADA;cAEAC,sBAFA;cAGAC,eAHA;cAIAC;YAJA,GAKAV,IALA,CAKA;cACA;gBACA;gBACAW,cAFA;gBAGAb;cAHA;;cAKA;gBACAc;cACA;;cACA;gBACAA;cACA;;cACA;gBACAA;cACA;;cACA,4CACAZ,IADA,CACA;gBACA;kBACA;;kBACA;kBACAa;gBACA,CAJA,MAIA;kBACA;gBACA;cACA,CATA;YAUA,CA9BA,EA8BAC,KA9BA,CA8BA;cACA;gBACAL,YADA;gBAEAM;cAFA;YAIA,CAnCA;UAoCA;QACA,CA9CA,MA8CA;UACA;QACA;MACA,CAxDA;IAyDA,CAxJA;IAyJAC,KAzJA,mBAyJA;MACA;IACA,CA3JA;IA4JAC,WA5JA,yBA4JA;MAAA;;MAEA;QACAtB;QACA;UACA;YACA;YACAuB;cAAA;;cACAC,2CACAnB,IADA,CACA;gBACAL;gBACAA;;gBACA;kBACA;kBACA;kBACA;oBACAC,kBADA;oBAEAZ,8BAFA;oBAGAc;kBAHA;kBAKAC,kDARA,CASA;;kBACA;;kBACA;oBACAA;kBACA;;kBACA;oBACAA;kBACA;;kBACA;oBACA,uDACAC,IADA,CACA;sBACA;wBACAmB;;wBACA;0BACAA;0BACAA;4BACA7C,kBADA;4BAEA2B;8BACAC,4BADA;8BAEAlB,8BAFA;8BAGAmB,sBAHA;8BAIAC,oBAJA;8BAKAC;4BALA;0BAFA;wBAUA,CAZA,MAYA;0BACAc;0BACAA;4BACA7C,kBADA;4BAEA2B;8BACAC,4BADA;8BAEAlB,8BAFA;8BAGAoB,oBAHA;8BAIAD;4BAJA;0BAFA;wBASA;sBACA;oBAAA,CA5BA;kBA4BA;gBACA,CA/CA,MAgDA;kBACAgB;kBACAA;;kBACA;oBACAA;oBACAA;kBACA;gBACA;cACA,CA5DA,EADA,CA6DA;YACA,CA9DA,EA8DA,IA9DA;UAgEA,CAlEA,MAmEA;YACA;;YACA;;YACA;cACA;cACA;YACA;UACA;QACA,CA5EA;MA4EA;;MACA;QACA;QACA;MACA;IACA,CAjPA;IAkPAC,WAlPA,yBAkPA;MAAA;;MACAC;QACA;QACA;UACA;UACA;QACA;MACA,CANA;IAOA;EA1PA;AAhCA","names":["name","components","Map","Head","theMeeting","children","path","data","nowTime","dialogTable","meetingId","form","code","uname","faceIn","user","created","methods","check","back","sign","console","id","participateStatus","userId","form3","then","params","meetingName","roomId","udid","qwq","join","confirmButtonText","cancelButtonText","type","center","checkStatus","from1","res","catch","message","cback","joinMeeting","setTimeout","that","enterSearch","document"],"sourceRoot":"src/components","sources":["AddMeeting.vue"],"sourcesContent":["<template>\r\n<el-container style=\"background: rgb(250 251 252);\">\r\n  <el-header style=\"background: rgb(255 255 255);height: 72px\">\r\n    <Head/>\r\n  </el-header>\r\n\r\n  <div style=\"background: rgb(255 255 255)\">\r\n    <div class=\"addMeetingBody\">\r\n      <div class=\"addMeetingBody-title\">\r\n        <div v-if=\"meetingId===''\">加入会议</div>\r\n        <div v-if=\"meetingId!==''\">会议详情</div>\r\n      </div>\r\n      <div class=\"addMeetingBody-main\"  v-if=\"meetingId===''\">\r\n        <p>请输入会议号</p>\r\n        <el-input class=\"cl\" v-model=\"code\" placeholder=\"\"></el-input>\r\n        <el-row class=\"btn-style\" >\r\n          <el-button type=\"primary\"  @click=\"join\" @keyup.enter=\"enterSearch\">加入会议</el-button>\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n\r\n<!--    手动签到弹窗-->\r\n    <el-dialog title=\"手动签到\"  :visible.sync=\"dialogTable\">\r\n      <Map></Map>\r\n\r\n      <div style=\"z-index: 1;position: relative;left: 36%;top: 10px;\">\r\n        <el-button style=\"margin-right: 60px\" @click=\"cback\">返回</el-button>\r\n        <el-button type=\"primary\" @click=\"sign()\">签到</el-button>\r\n      </div>\r\n\r\n    </el-dialog>\r\n\r\n    <div class=\"detail\" STYLE=\"width: 100%\" v-if=\"meetingId!==''\">\r\n<!--      <p style=\"position: absolute;left: 47.5%; top: 216px;font-size: x-large\">会议详情</p>-->\r\n      <div CLASS=\"MD\">\r\n      <el-card>\r\n      <el-form :model=\"form\" label-width=\"130px\"   style=\"padding-right: 15px\" >\r\n        <el-form-item label=\"会议主题 :\" prop=\"name\">\r\n          <el-input readonly v-model=\"form.mname\"  style=\"width: 55%;font-size: large\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"会议时间 :\" >\r\n          <el-col :span=\"5\" >\r\n            <el-date-picker\r\n                readonly\r\n                v-model=\"form.startDate\"\r\n                type=\"datetime\"\r\n            >\r\n            </el-date-picker>\r\n          </el-col>\r\n          <el-col class=\"line\" :span=\"5\" style=\"position: relative;left:12%;top: 3px\" >  ——> </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-date-picker\r\n                readonly\r\n                v-model=\"form.endDate\"\r\n                type=\"datetime\"\r\n            >\r\n            </el-date-picker>\r\n          </el-col>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"会议号 :\" prop=\"code\" >\r\n          <el-input v-model=\"form.code\" style=\"width: 55%\"> </el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"审核情况 :\" prop=\"show\"  >\r\n          <el-tag size=\"small\"  style=\"left: 14px;height: 36px;font-size:large;position: relative;top:3px \" v-if=\"form.show === 0\" >未审核</el-tag>\r\n          <el-tag size=\"small\"  style=\"left: 14px;height: 36px;font-size:large;position: relative;top:3px \" v-else-if=\"form.show === 1\" >已通过</el-tag>\r\n          <el-tag size=\"small\"  v-else-if=\"form.show === 2\" >未通过</el-tag>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"报名情况 :\" prop=\"checkStatus\"  >\r\n          <el-tag size=\"small\"  style=\"left: 14px;height: 36px;font-size:large;position: relative;top:3px \" type=\"danger\" v-if=\"form.checkStatus === 0\" >未报名</el-tag>\r\n          <el-tag size=\"small\"  style=\"left: 14px;height: 36px;font-size:large;position: relative;top:3px \" v-else-if=\"form.checkStatus === 1\" >已报名</el-tag>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"会议地址 :\" prop=\"address\">\r\n          <el-input v-model=\"form.address\" style=\"width: 75%\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"创建时间 :\" prop=\"code\">\r\n          <el-input v-model=\"form.createTime\" style=\"width: 100%;\"> </el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"会议简介 :\" prop=\"address\" >\r\n          <div>\r\n            <div v-html=\"form.description\" style=\"left: 2%;position: relative; \"></div>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n\r\n      </el-card>\r\n        <div style=\"z-index: 1;position: relative;left: 34%;top: 30px;\">\r\n          <el-button style=\"margin-right: 60px\" @click=\"back\">返回</el-button>\r\n          <el-button type=\"primary\" @click=\"joinMeeting()\">进入会议</el-button>\r\n        </div>\r\n    </div>  </div>\r\n    <el-footer>\r\n    <div class=\"footer\"></div>\r\n    </el-footer>\r\n  </div>\r\n\r\n</el-container>\r\n</template>\r\n\r\n<script>\r\nimport Head from \"@/components/Head\";\r\nimport Map from \"@/views/Map\";\r\nimport moment from \"moment\";\r\nimport vPinyin from '../../src/assets/js/vue-py'\r\nimport theMeeting from \"@/views/meeting/index\"\r\nexport default {\r\n  name: \"AddMeeting\",\r\n  components: {\r\n    Map,\r\n    Head,\r\n    theMeeting\r\n  },\r\n\r\n  children: [\r\n    {\r\n     name:'Map',\r\n      path:'Map',\r\n     components: Map\r\n    },\r\n\r\n  ],\r\n\r\n  data() {\r\n    return {\r\n      nowTime: new Date(), // 当前时间\r\n      dialogTable:false,\r\n      meetingId: '',\r\n      form: '',\r\n      code: '',\r\n      uname:'',\r\n      faceIn:1,\r\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\r\n    };\r\n  },\r\n  created() {\r\n    this.enterSearch()\r\n  },\r\n  methods: {\r\n    check() {\r\n    },\r\n    back() {\r\n      this.meetingId = ''\r\n      this.code = ''\r\n    },\r\n    sign(){\r\n      let t1=moment().startOf('millisecond').format(\"YYYY-MM-DD HH:mm:ss\")\r\n      console.log(this.form)\r\n      const form3= {\r\n        id:this.form.udid,\r\n        meetingId:this.form.meetingId,\r\n        participateStatus:this.form.participateStatus,\r\n        userId:this.user.id\r\n      }\r\n      form3.signInDate=JSON.parse(JSON.stringify(t1))\r\n      // this.form.udid=form3.id\r\n      let t2= moment(this.form.startDate).format(\"YYYY-MM-DD HH:mm:ss\")\r\n      if ( t2 >= t1 ){\r\n      form3.participateStatus=1\r\n      }\r\n      if  (t2 < t1) {\r\n        form3.participateStatus=2\r\n      }\r\n      form3.signAdress=localStorage.getItem(\"location\");\r\n      if (this.form.participateStatus===0){\r\n    this.request.post(\"/AboutMeeting/manualSign\",form3)\r\n        .then(res => {\r\n\r\n          if (res.code === '200') {\r\n            this.$message.success(\"签到成功\")\r\n            if(this.form.createUser===this.user.id){\r\n              this.$message.success(\"创建成功\")\r\n              this.$router.push({\r\n                name: \"theMeeting\",\r\n                params:{\r\n                  meetingName: this.form.mname,\r\n                  meetingId:this.form.meetingId,\r\n                  roomId:this.form.code,\r\n                  udid:this.form.udid,\r\n                  qwq:1\r\n                }\r\n              })\r\n            }\r\n            else{\r\n              this.$message.success(\"加入成功\")\r\n              this.$router.push({\r\n                name: \"theMeeting\",\r\n                params:{\r\n                  meetingName: this.form.mname,\r\n                  meetingId:this.form.meetingId,\r\n                  udid:this.form.udid,\r\n                  roomId:this.form.code\r\n                }\r\n              })\r\n            }\r\n            // this.form.checkStatus = 1\r\n          } else {\r\n            this.$message.error(\"签到失败\")\r\n          }\r\n        })}\r\n          else{\r\n\r\n        this.$message.error(\"您已签到,请勿重复签到！\")\r\n        if(this.form.createUser===this.user.id){\r\n          this.$message.success(\"创建成功\")\r\n          this.$router.push({\r\n            name: \"theMeeting\",\r\n            params:{\r\n              meetingName: this.form.mname,\r\n              meetingId:this.form.meetingId,\r\n              roomId:this.form.code,\r\n              udid:this.form.udid,\r\n              qwq:1\r\n            }\r\n          })\r\n        }\r\n        else{\r\n          this.$message.success(\"加入成功\")\r\n          this.$router.push({\r\n            name: \"theMeeting\",\r\n            params:{\r\n              meetingName: this.form.mname,\r\n              meetingId:this.form.meetingId,\r\n              udid:this.form.udid,\r\n              roomId:this.form.code\r\n            }\r\n          })\r\n        }\r\n        }\r\n\r\n\r\n    },\r\n    join() {\r\n      this.request.get(\"/AboutMeeting/join\", {\r\n            params: {\r\n              code: this.code,\r\n              userId: this.user.id\r\n            }\r\n          }\r\n      ).then(res => {\r\n        if (res.code === '200') {\r\n          this.form = res.data\r\n          console.log(res.data)\r\n          this.meetingId = res.data.id\r\n          if (res.data.mname === undefined) {\r\n            this.form.mname = res.data.name\r\n            this.form.checkStatus = 0\r\n          }\r\n          if (res.data.checkStatus === 0) {\r\n            this.$confirm('是否报名此次会议？', '您还未报名此会议', {\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              type: 'warning',\r\n              center: true\r\n            }).then(() => {\r\n              const from1 = {\r\n                // meetingId: res.data.meetingId,\r\n                checkStatus: 1,\r\n                userId: this.user.id\r\n              }\r\n              if (res.data.udid !== undefined) {\r\n                from1.id = res.data.udid\r\n              }\r\n              if (res.data.meetingId !== undefined) {\r\n                from1.meetingId = res.data.meetingId\r\n              }\r\n              if (res.data.meetingId === undefined) {\r\n                from1.meetingId = res.data.id\r\n              }\r\n              this.request.post('/AboutMeeting', from1)\r\n                  .then(res => {\r\n                    if (res.code === '200') {\r\n                      this.$message.success(\"报名成功\")\r\n                      this.form.checkStatus = 1\r\n                      res.checkStatus = 1\r\n                    } else {\r\n                      this.$message.error(\"报名失败\")\r\n                    }\r\n                  })\r\n            }).catch(() => {\r\n              this.$message({\r\n                type: 'info',\r\n                message: '已取消报名'\r\n              });\r\n            })\r\n          }\r\n        } else {\r\n          this.$message.error(\"会议号有误！\")\r\n        }\r\n      })\r\n    },\r\n    cback(){\r\n      this.dialogTable=false\r\n    },\r\n    joinMeeting(){\r\n\r\n      if(this.faceIn===1){\r\n        console.log(this.faceIn)\r\n        this.request.post(\"/AboutMeeting/face\").then(res => {\r\n          if (res.code === '200') {\r\n            let that= this\r\n            setTimeout(function() {\r\n              that.request.get(\"/AboutMeeting/UserName\")\r\n                  .then(res =>{\r\n                    console.log(res.data)\r\n                    console.log(vPinyin.chineseToPinYin(that.user.name))\r\n                    if (res.data===vPinyin.chineseToPinYin(that.user.name)){\r\n                      //签到信息\r\n                      let t1=moment().startOf('millisecond').format(\"YYYY-MM-DD HH:mm:ss\")\r\n                      const form3= {\r\n                        id:that.form.udid,\r\n                        meetingId:that.form.meetingId,\r\n                        userId:that.user.id\r\n                      }\r\n                      form3.signInDate=JSON.parse(JSON.stringify(t1))\r\n                      // this.form.udid=form3.id\r\n                      let t2= moment(that.form.startDate).format(\"YYYY-MM-DD HH:mm:ss\")\r\n                      if ( t2 >= t1 ){\r\n                        form3.participateStatus=1\r\n                      }\r\n                      if  (t2 < t1) {\r\n                        form3.participateStatus=2\r\n                      }\r\n                      if (this.form.participateStatus===0){\r\n                        this.request.post(\"/AboutMeeting/manualSign\",form3)\r\n                            .then(res => {\r\n                              if (res.code === '200') {\r\n                                that.$message.success(\"签到成功\")\r\n                                if (that.form.createUser === that.user.id) {\r\n                                  that.$message.success(\"创建成功\")\r\n                                  that.$router.push({\r\n                                    name: \"theMeeting\",\r\n                                    params: {\r\n                                      meetingName: that.form.mname,\r\n                                      meetingId: that.form.meetingId,\r\n                                      roomId: that.form.code,\r\n                                      udid: that.form.udid,\r\n                                      qwq: 1\r\n                                    }\r\n                                  })\r\n                                } else {\r\n                                  that.$message.success(\"加入成功\")\r\n                                  that.$router.push({\r\n                                    name: \"theMeeting\",\r\n                                    params: {\r\n                                      meetingName: that.form.mname,\r\n                                      meetingId: that.form.meetingId,\r\n                                      udid: that.form.udid,\r\n                                      roomId: that.form.code\r\n                                    }\r\n                                  })\r\n                                }\r\n                              }})}\r\n                    }\r\n                    else{\r\n                      that.$message.error(\"识别失败！即将进行手动签到\")\r\n                      that.faceIn=0\r\n                      if(that.faceIn===0){\r\n                        that.dialogTable=true\r\n                        that.faceIn=1\r\n                      }\r\n                    }\r\n                  })  // 需要执行的代码\r\n            }, 4000);\r\n\r\n          }\r\n          else {\r\n            this.$message.error(\"人脸识别异常！即将进行手动签到\")\r\n            this.faceIn=0\r\n            if(this.faceIn===0){\r\n              this.dialogTable=true\r\n              this.faceIn=1\r\n            }\r\n          }\r\n      })}\r\n      if(this.faceIn===0){\r\n      this.dialogTable=true\r\n        this.faceIn=1\r\n      }\r\n    },\r\n    enterSearch(){\r\n      document.onkeydown = e =>{\r\n           //13表⽰回车键，baseURI是当前页⾯的地址，为了更严谨，也可以加别的，可以打印e看⼀下\r\n        if (e.keyCode === 13 && e.target.baseURI.match(/AddMeeting/)) {\r\n               //回车后执⾏搜索⽅法\r\n          this.join()\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n\r\n::v-deep .el-input__inner {\r\n\r\n  -webkit-appearance: none;\r\n  background-color: #FFF;\r\n  border-radius: 4px;\r\n  border: 1px solid #DCDFE6;\r\n  box-sizing: border-box;\r\n  color: #606266;\r\n  display: inline-block;\r\n  font-size: large;\r\n  height: 50px;\r\n  line-height: 51px;\r\n  border-top-width: 2px;\r\n  outline: 0;\r\n  padding: 0 15px;\r\n  transition: border-color .2s cubic-bezier(.645,.045,.355,1);\r\n  width: 100%;\r\n}\r\n\r\n.cl{\r\n  width: 112%;\r\n  left: -17px;\r\n}\r\n.addMeetingBody {\r\n  text-align: center;\r\n\r\n}\r\n\r\n.addMeetingBody .addMeetingBody-title  div{\r\n  height: 120px;\r\n  font-weight: 400;\r\n  line-height: 120px;\r\n  font-size: 35px;\r\n  background-color: #fafbfc;\r\n  border-bottom: 1px solid #f4f5f6;\r\n\r\n}\r\n\r\n.addMeetingBody-main{\r\n  position: relative;\r\n  width: 300px;\r\n  height: 434px;\r\n  margin: 90px auto 0;\r\n  top: 41px;\r\n}\r\n.addMeetingBody-main p{\r\n  margin-bottom:32px ;\r\n}\r\n\r\n::v-deep  .cl .el-input__inner{\r\n  text-align: center;\r\n}\r\n.btn-style{\r\n  margin-top: 32px;\r\n}\r\n.btn-check{\r\n  position: absolute;\r\n  left: 1122px;\r\n  top: 328px;\r\n}\r\n.MD{\r\n  width: 900px;\r\n  position: relative;\r\n  left: 27%;\r\n  top: 5px;\r\n  padding: 26px;\r\n  margin: 14px;\r\n}\r\n.footer{\r\n  height: 226px;\r\n  position: sticky;\r\n  bottom: 133px;\r\n\r\n  /* background-color: pink; */\r\n  background: url('../assets/footer.svg') repeat;\r\n}\r\n.el-tag--small {\r\n  height: 33px;\r\n  padding: 10px 9px 31px;\r\n  line-height: 22px;\r\n  font-size: initial;\r\n\r\n\r\n}\r\n\r\n::v-deep .detail .el-input__inner {\r\n  border: 1px solid #ffffff;\r\n  font-size: large;\r\n  font-family: 微软雅黑;\r\n  width: 314px;\r\n\r\n}\r\n::v-deep .MD .el-input__inner:hover {\r\n  border-color: #ffffff;\r\n}\r\n::v-deep .MD .el-form-item__label {\r\n  font-size: large;\r\n}\r\n::v-deep .MD .el-form-item__label {\r\n  text-align: right;\r\n  vertical-align: middle;\r\n  float: left;\r\n  color: #606266;\r\n  line-height: 50px;\r\n  padding: 0px 12px 0px 0px;\r\n  box-sizing: border-box;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}