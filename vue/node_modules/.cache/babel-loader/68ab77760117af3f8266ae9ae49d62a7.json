{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport t from \"vue\";\nimport { createEditor as e, DomEditor as o, createToolbar as r } from \"@wangeditor/editor\";\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n\nvar n = function () {\n  return n = Object.assign || function (t) {\n    for (var e, o = 1, r = arguments.length; o < r; o++) for (var n in e = arguments[o]) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n\n    return t;\n  }, n.apply(this, arguments);\n};\n\nfunction i(t) {\n  var e = \"请使用 '@\".concat(t, \"' 事件，不要放在 props 中\");\n  return e += \"\\nPlease use '@\".concat(t, \"' event instead of props\");\n}\n\nvar a = t.extend({\n  render: function (t) {\n    return t(\"div\", {\n      ref: \"box\"\n    });\n  },\n  name: \"Editor\",\n  data: function () {\n    return {\n      curValue: \"\",\n      editor: null\n    };\n  },\n  props: [\"defaultContent\", \"defaultConfig\", \"mode\", \"defaultHtml\", \"value\"],\n  mounted: function () {\n    this.create();\n  },\n  watch: {\n    value: function (t) {\n      t === this.curValue || this.setHtml(t);\n    }\n  },\n  methods: {\n    setHtml: function (t) {\n      var e = this.editor;\n      null != e && e.setHtml(t);\n    },\n    create: function () {\n      var t = this;\n\n      if (null != this.$refs.box) {\n        var o = this.defaultConfig || {},\n            r = JSON.stringify(Array.isArray(this.defaultContent) ? this.defaultContent : []);\n        e({\n          selector: this.$refs.box,\n          html: this.defaultHtml || this.value || \"\",\n          config: n(n({}, o), {\n            onCreated: function (e) {\n              if (t.editor = Object.seal(e), t.$emit(\"onCreated\", e), o.onCreated) {\n                var r = i(\"onCreated\");\n                throw new Error(r);\n              }\n            },\n            onChange: function (e) {\n              var r = e.getHtml();\n\n              if (t.curValue = r, t.$emit(\"input\", r), t.$emit(\"onChange\", e), o.onChange) {\n                var n = i(\"onChange\");\n                throw new Error(n);\n              }\n            },\n            onDestroyed: function (e) {\n              if (t.$emit(\"onDestroyed\", e), o.onDestroyed) {\n                var r = i(\"onDestroyed\");\n                throw new Error(r);\n              }\n            },\n            onMaxLength: function (e) {\n              if (t.$emit(\"onMaxLength\", e), o.onMaxLength) {\n                var r = i(\"onMaxLength\");\n                throw new Error(r);\n              }\n            },\n            onFocus: function (e) {\n              if (t.$emit(\"onFocus\", e), o.onFocus) {\n                var r = i(\"onFocus\");\n                throw new Error(r);\n              }\n            },\n            onBlur: function (e) {\n              if (t.$emit(\"onBlur\", e), o.onBlur) {\n                var r = i(\"onBlur\");\n                throw new Error(r);\n              }\n            },\n            customAlert: function (e, r) {\n              if (t.$emit(\"customAlert\", e, r), o.customAlert) {\n                var n = i(\"customAlert\");\n                throw new Error(n);\n              }\n            },\n            customPaste: function (e, r) {\n              if (o.customPaste) {\n                var n = i(\"customPaste\");\n                throw new Error(n);\n              }\n\n              var a;\n              return t.$emit(\"customPaste\", e, r, function (t) {\n                a = t;\n              }), a;\n            }\n          }),\n          content: JSON.parse(r),\n          mode: this.mode || \"default\"\n        });\n      }\n    }\n  }\n}),\n    u = t.extend({\n  name: \"Toolbar\",\n  render: function (t) {\n    return t(\"div\", {\n      ref: \"box\"\n    });\n  },\n  props: [\"editor\", \"defaultConfig\", \"mode\"],\n  methods: {\n    create: function (t) {\n      null != this.$refs.box && null != t && (o.getToolbar(t) || r({\n        editor: t,\n        selector: this.$refs.box,\n        config: this.defaultConfig || {},\n        mode: this.mode || \"default\"\n      }));\n    }\n  },\n  watch: {\n    editor: {\n      handler: function (t) {\n        null != t && this.create(t);\n      },\n      immediate: !0\n    }\n  }\n});\nexport { a as Editor, u as Toolbar };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,SAASA,CAAT,CAAsBC,CAAtB,EAAsBA;EACpB,IAAIC,IAAO,gBAASD,CAAT,EAASA,mBAAT,CAAX;EAEA,OADAC,KAAQ,yBAAkBD,CAAlB,EAAkBA,0BAAlB,CACR;AAGF;;AAAA,QAAeE,EAAIC,MAAJD,CAAW;EAExBE,kBAAOC,CAAPD,EAAOC;IACL,OAAOA,EAAE,KAAFA,EAAS;MAAEC,KAAK;IAAP,CAATD,CAAP;EAAuB,CAHD;EAKxBE,MAAM,QALkB;EAMxBC;IACE,OAAO;MACLC,UAAU,EADL;MAELC,QAAQ;IAFH,CAAP;EAEU,CATY;EAYxBC,OAAO,CAAC,gBAAD,EAAmB,eAAnB,EAAoC,MAApC,EAA4C,aAA5C,EAA2D,OAA3D,CAZiB;EAaxBC;IACEC,KAAKC,MAALD;EAAKC,CAdiB;EAgBxBC,OAAO;IAELC,iBAAMC,CAAND,EAAMC;MACYA,MAAWJ,KAAKJ,QAAhBQ,IAIhBJ,KAAKK,OAALL,CAAaI,CAAbJ,CAJgBI;IAIHA;EAPV,CAhBiB;EA0BxBE,SAAS;IAEPD,mBAAQE,CAAR,EAAQA;MACN,IAAMV,IAASG,KAAKH,MAApB;MACc,QAAVA,CAAU,IACdA,EAAOQ,OAAPR,CAAeU,CAAfV,CADc;IACCU,CALV;IASPN;MAAA;;MACE,IAAsB,QAAlBD,KAAKQ,KAALR,CAAWS,GAAf;QAEA,IAAMC,IAAgBV,KAAKU,aAALV,IAAsB,EAA5C;QAAA,IAEMW,IAAiBC,KAAKC,SAALD,CACrBE,MAAMC,OAAND,CAAcd,KAAKW,cAAnBG,IAAqCd,KAAKW,cAA1CG,GAA2D,EADtCF,CAFvB;QAMAI,EAAa;UACXC,UAAUjB,KAAKQ,KAALR,CAAWS,GADV;UAEXS,MAAMlB,KAAKmB,WAALnB,IAAoBA,KAAKG,KAAzBH,IAAkC,EAF7B;UAGXoB,gBACKV,CADLU,GACKV;YACHW,WAAW,UAACxB,CAAD,EAACA;cAIV,IAHAyB,EAAKzB,MAALyB,GAAcC,OAAOC,IAAPD,CAAY1B,CAAZ0B,CAAdD,EAEAA,EAAKG,KAALH,CAAW,WAAXA,EAAwBzB,CAAxByB,CAFAA,EAGIZ,EAAcW,SAAlB,EAA6B;gBAC3B,IAAMjC,IAAOF,EAAa,WAAbA,CAAb;gBACA,MAAM,IAAIwC,KAAJ,CAAUtC,CAAV,CAAN;cAAgBA;YAAAA,CAPjBsB;YAUHiB,UAAU,UAAC9B,CAAD,EAACA;cACT,IAAM+B,IAAa/B,EAAOgC,OAAPhC,EAAnB;;cAKA,IAJAyB,EAAK1B,QAAL0B,GAAgBM,CAAhBN,EACAA,EAAKG,KAALH,CAAW,OAAXA,EAAoBM,CAApBN,CADAA,EAGAA,EAAKG,KAALH,CAAW,UAAXA,EAAuBzB,CAAvByB,CAHAA,EAIIZ,EAAciB,QAAlB,EAA4B;gBAC1B,IAAMvC,IAAOF,EAAa,UAAbA,CAAb;gBACA,MAAM,IAAIwC,KAAJ,CAAUtC,CAAV,CAAN;cAAgBA;YAAAA,CAlBjBsB;YAqBHoB,aAAa,UAACjC,CAAD,EAACA;cAEZ,IADAyB,EAAKG,KAALH,CAAW,aAAXA,EAA0BzB,CAA1ByB,GACIZ,EAAcoB,WAAlB,EAA+B;gBAC7B,IAAM1C,IAAOF,EAAa,aAAbA,CAAb;gBACA,MAAM,IAAIwC,KAAJ,CAAUtC,CAAV,CAAN;cAAgBA;YAAAA,CAzBjBsB;YA4BHqB,aAAa,UAAClC,CAAD,EAACA;cAEZ,IADAyB,EAAKG,KAALH,CAAW,aAAXA,EAA0BzB,CAA1ByB,GACIZ,EAAcqB,WAAlB,EAA+B;gBAC7B,IAAM3C,IAAOF,EAAa,aAAbA,CAAb;gBACA,MAAM,IAAIwC,KAAJ,CAAUtC,CAAV,CAAN;cAAgBA;YAAAA,CAhCjBsB;YAmCHsB,SAAS,UAACnC,CAAD,EAACA;cAER,IADAyB,EAAKG,KAALH,CAAW,SAAXA,EAAsBzB,CAAtByB,GACIZ,EAAcsB,OAAlB,EAA2B;gBACzB,IAAM5C,IAAOF,EAAa,SAAbA,CAAb;gBACA,MAAM,IAAIwC,KAAJ,CAAUtC,CAAV,CAAN;cAAgBA;YAAAA,CAvCjBsB;YA0CHuB,QAAQ,UAACpC,CAAD,EAACA;cAEP,IADAyB,EAAKG,KAALH,CAAW,QAAXA,EAAqBzB,CAArByB,GACIZ,EAAcuB,MAAlB,EAA0B;gBACxB,IAAM7C,IAAOF,EAAa,QAAbA,CAAb;gBACA,MAAM,IAAIwC,KAAJ,CAAUtC,CAAV,CAAN;cAAgBA;YAAAA,CA9CjBsB;YAiDHwB,aAAa,UAAC9C,CAAD,EAAO+C,CAAP,EAAOA;cAElB,IADAb,EAAKG,KAALH,CAAW,aAAXA,EAA0BlC,CAA1BkC,EAAgCa,CAAhCb,GACIZ,EAAcwB,WAAlB,EAA+B;gBAC7B,IAAME,IAAOlD,EAAa,aAAbA,CAAb;gBACA,MAAM,IAAIwC,KAAJ,CAAUU,CAAV,CAAN;cAAgBA;YAAAA,CArDjB1B;YAwDH2B,aAAa,UAACxC,CAAD,EAASyC,CAAT,EAASA;cACpB,IAAI5B,EAAc2B,WAAlB,EAA+B;gBAC7B,IAAMjD,IAAOF,EAAa,aAAbA,CAAb;gBACA,MAAM,IAAIwC,KAAJ,CAAUtC,CAAV,CAAN;cAEF;;cAAA,IAAImD,CAAJ;cAIA,OAHAjB,EAAKG,KAALH,CAAW,aAAXA,EAA0BzB,CAA1ByB,EAAkCgB,CAAlChB,EAAyC,UAACkB,CAAD,EAACA;gBACxCD,IAAMC,CAAND;cAAMC,CADRlB,GAGOiB,CAAP;YAAOA;UAjEN7B,CADLU,CAHW;UAwEXqB,SAAS7B,KAAK8B,KAAL9B,CAAWD,CAAXC,CAxEE;UAyEX+B,MAAM3C,KAAK2C,IAAL3C,IAAa;QAzER,CAAbgB;MAyEqB;IAAA;EA3FhB;AA1Be,CAAX3B,CAAf;AAAA,IAqH2BuD,IC3HZvD,EAAIC,MAAJD,CAAW;EACxBK,MAAM,SADkB;EAExBH,kBAAOC,CAAPD,EAAOC;IACL,OAAOA,EAAE,KAAFA,EAAS;MAAEC,KAAK;IAAP,CAATD,CAAP;EAAuB,CAHD;EAKxBM,OAAO,CAAC,QAAD,EAAW,eAAX,EAA4B,MAA5B,CALiB;EAMxBQ,SAAS;IAEPL,kBAAOJ,CAAP,EAAOA;MACiB,QAAlBG,KAAKQ,KAALR,CAAWS,GAAO,IACR,QAAVZ,CADkB,KAElBgD,EAAUC,UAAVD,CAAqBhD,CAArBgD,KAEJE,EAAc;QACZlD,SADY;QAEZoB,UAAUjB,KAAKQ,KAALR,CAAWS,GAFT;QAGZW,QAAQpB,KAAKU,aAALV,IAAsB,EAHlB;QAIZ2C,MAAM3C,KAAK2C,IAAL3C,IAAa;MAJP,CAAd+C,CAJsB;IAQD;EAXhB,CANe;EAqBxB7C,OAAO;IACLL,QAAQ;MACNmD,mBAAQC,CAARD,EAAQC;QACG,QAALA,CAAK,IACTjD,KAAKC,MAALD,CAAYiD,CAAZjD,CADS;MACGiD,CAHR;MAKNC,YAAW;IALL;EADH;AArBiB,CAAX7D,CDMf;ACqBiB","names":["genErrorInfo","fnName","info","Vue","extend","render","h","ref","name","data","curValue","editor","props","mounted","this","create","watch","value","newVal","setHtml","methods","newHtml","$refs","box","defaultConfig","defaultContent","JSON","stringify","Array","isArray","createEditor","selector","html","defaultHtml","config","onCreated","_this","Object","seal","$emit","Error","onChange","editorHtml","getHtml","onDestroyed","onMaxLength","onFocus","onBlur","customAlert","type","info_1","customPaste","event","res","val","content","parse","mode","u","DomEditor","getToolbar","createToolbar","handler","e","immediate"],"sources":["../src/components/Editor.vue","../src/components/Toolbar.vue"],"sourcesContent":["<script lang=\"ts\">\nimport Vue from 'vue';\nimport { createEditor } from '@wangeditor/editor';\n\nfunction genErrorInfo(fnName: string) {\n  let info = `请使用 '@${fnName}' 事件，不要放在 props 中`;\n  info += `\\nPlease use '@${fnName}' event instead of props`;\n  return info;\n}\n\nexport default Vue.extend({\n  //【注意】单独写 <template>...</template> 时，rollup 打包完浏览器运行时报错，所以先在这里写 template\n  render(h) {\n    return h('div', { ref: 'box' });\n  },\n  name: 'Editor',\n  data() {\n    return {\n      curValue: '',\n      editor: null,\n    };\n  },\n  props: ['defaultContent', 'defaultConfig', 'mode', 'defaultHtml', 'value'], // value 用于自定义 v-model\n  mounted() {\n    this.create();\n  },\n  watch: {\n    // 监听 'value' 属性变化 - value 用于自定义 v-model\n    value(newVal) {\n      const isEqual = newVal === this.curValue;\n      if (isEqual) return; // 和当前内容一样，则忽略\n\n      // 重置 HTML\n      this.setHtml(newVal);\n    },\n  },\n  methods: {\n    // 重置 HTML\n    setHtml(newHtml: string) {\n      const editor = this.editor as any;\n      if (editor == null) return;\n      editor.setHtml(newHtml);\n    },\n\n    // 创建 editor\n    create() {\n      if (this.$refs.box == null) return;\n\n      const defaultConfig = this.defaultConfig || {};\n\n      const defaultContent = JSON.stringify(\n        Array.isArray(this.defaultContent) ? this.defaultContent : []\n      );\n\n      createEditor({\n        selector: this.$refs.box as Element,\n        html: this.defaultHtml || this.value || '',\n        config: {\n          ...defaultConfig,\n          onCreated: (editor) => {\n            this.editor = Object.seal(editor) as any; // 注意，一定要用 Object.seal() 否则会报错\n\n            this.$emit('onCreated', editor);\n            if (defaultConfig.onCreated) {\n              const info = genErrorInfo('onCreated');\n              throw new Error(info);\n            }\n          },\n          onChange: (editor) => {\n            const editorHtml = editor.getHtml();\n            this.curValue = editorHtml; // 记录当前 html 内容\n            this.$emit('input', editorHtml); // 用于自定义 v-model\n\n            this.$emit('onChange', editor);\n            if (defaultConfig.onChange) {\n              const info = genErrorInfo('onChange');\n              throw new Error(info);\n            }\n          },\n          onDestroyed: (editor) => {\n            this.$emit('onDestroyed', editor);\n            if (defaultConfig.onDestroyed) {\n              const info = genErrorInfo('onDestroyed');\n              throw new Error(info);\n            }\n          },\n          onMaxLength: (editor) => {\n            this.$emit('onMaxLength', editor);\n            if (defaultConfig.onMaxLength) {\n              const info = genErrorInfo('onMaxLength');\n              throw new Error(info);\n            }\n          },\n          onFocus: (editor) => {\n            this.$emit('onFocus', editor);\n            if (defaultConfig.onFocus) {\n              const info = genErrorInfo('onFocus');\n              throw new Error(info);\n            }\n          },\n          onBlur: (editor) => {\n            this.$emit('onBlur', editor);\n            if (defaultConfig.onBlur) {\n              const info = genErrorInfo('onBlur');\n              throw new Error(info);\n            }\n          },\n          customAlert: (info, type) => {\n            this.$emit('customAlert', info, type);\n            if (defaultConfig.customAlert) {\n              const info = genErrorInfo('customAlert');\n              throw new Error(info);\n            }\n          },\n          customPaste: (editor, event) => {\n            if (defaultConfig.customPaste) {\n              const info = genErrorInfo('customPaste');\n              throw new Error(info);\n            }\n            let res;\n            this.$emit('customPaste', editor, event, (val: any) => {\n              res = val;\n            });\n            return res;\n          },\n        },\n        content: JSON.parse(defaultContent),\n        mode: this.mode || 'default',\n      });\n    },\n  },\n});\n</script>\n","<script lang=\"ts\">\nimport Vue from 'vue';\nimport { createToolbar, DomEditor } from '@wangeditor/editor';\n\nexport default Vue.extend({\n  name: 'Toolbar',\n  render(h) {\n    return h('div', { ref: 'box' });\n  },\n  props: ['editor', 'defaultConfig', 'mode'],\n  methods: {\n    // 创建 toolbar\n    create(editor: any) {\n      if (this.$refs.box == null) return;\n      if (editor == null) return;\n      if (DomEditor.getToolbar(editor)) return // 不重复创建\n\n      createToolbar({\n        editor,\n        selector: this.$refs.box as Element,\n        config: this.defaultConfig || {},\n        mode: this.mode || 'default',\n      });\n    },\n  },\n  watch: {\n    editor: {\n      handler(e) {\n        if (e == null) return;\n        this.create(e);\n      },\n      immediate: true,\n    }\n  }\n});\n</script>\n"]},"metadata":{},"sourceType":"module"}