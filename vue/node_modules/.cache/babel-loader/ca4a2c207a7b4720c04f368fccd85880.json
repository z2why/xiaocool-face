{"ast":null,"code":"//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Map\",\n\n  data() {\n    return {\n      location1: this.location1\n    };\n  },\n\n  created() {},\n\n  mounted() {\n    var location1;\n    var map = new BMapGL.Map(\"container\");\n    var point = new BMapGL.Point(116.404, 39.915);\n    map.centerAndZoom(point, 19);\n    map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放\n\n    var scaleCtrl = new BMapGL.ScaleControl(); // 添加比例尺控件\n\n    map.addControl(scaleCtrl);\n    var zoomCtrl = new BMapGL.ZoomControl(); // 添加缩放控件\n\n    map.addControl(zoomCtrl);\n    var cityCtrl = new BMapGL.CityListControl(); // 添加城市列表控件\n\n    map.addControl(cityCtrl); // var geolocation = new BMapGL.Geolocation();\n    // geolocation.getCurrentPosition(function(r){\n    //   if(this.getStatus() == BMAP_STATUS_SUCCESS){\n    //     const province = r.address.province\n    //     const city = r.address.city\n    //     alert(province)\n    //     alert(city)\n    //   }\n    // });\n\n    var opts = {\n      width: 250,\n      // 信息窗口宽度\n      height: 100,\n      // 信息窗口高度\n      title: \"您的位置信息：\" // 信息窗口标题\n\n    };\n    var geolocation = new BMapGL.Geolocation();\n    geolocation.getCurrentPosition(function (r) {\n      if (this.getStatus() === BMAP_STATUS_SUCCESS) {\n        var mk = new BMapGL.Marker(r.point);\n        map.addOverlay(mk);\n        map.panTo(r.point); // 创建地理编码实例\n\n        var myGeo = new BMapGL.Geocoder(); // 根据坐标得到地址描述\n\n        myGeo.getLocation(new BMapGL.Point(r.point.lng, r.point.lat), function (result) {\n          if (result) {\n            location1 = result.address;\n            localStorage.setItem(\"location\", location1); // alert(location1);\n\n            var infoWindow = new BMapGL.InfoWindow(location1, opts); // 创建信息窗口对象\n\n            map.openInfoWindow(infoWindow, map.getCenter()); // 打开信息窗口\n          }\n        });\n      } else {\n        alert('failed:' + this.getStatus() + \"   \" + \"请检查网络状况!\");\n      }\n    });\n  },\n\n  methods: {\n    back() {}\n\n  }\n};","map":{"version":3,"mappings":";;;;;;AASA;EACAA,WADA;;EAEAC;IACA;MAEAC;IAFA;EAIA,CAPA;;EASAC,WAEA,CAXA;;EAYAC;IAEA;IACA;IAEA;IACAC;IACAA,gCAPA,CAOA;;IAIA,0CAXA,CAWA;;IACAA;IACA,wCAbA,CAaA;;IACAA;IACA,4CAfA,CAeA;;IACAA,yBAhBA,CAiBA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;MACAC,UADA;MACA;MACAC,WAFA;MAEA;MACAC,gBAHA,CAGA;;IAHA;IAQA;IACAC;MACA;QACA;QACAJ;QACAA,mBAHA,CAIA;;QACA,kCALA,CAMA;;QACAK;UACA;YACAR;YACAS,4CAFA,CAGA;;YACA,wDAJA,CAIA;;YACAN,gDALA,CAKA;UACA;QACA,CARA;MASA,CAhBA,MAiBA;QAAAO;MAAA;IACA,CAnBA;EAsBA,CAtEA;;EAuEAC;IAGAC,QACA;;EAJA;AAvEA","names":["name","data","location1","created","mounted","map","width","height","title","geolocation","myGeo","localStorage","alert","methods","back"],"sourceRoot":"src/views","sources":["Map.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"container\" style=\"width: 100%; height: calc(60vh - 100px)\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n  name: \"Map\",\r\n  data() {\r\n    return {\r\n\r\n      location1:this.location1\r\n    }\r\n  },\r\n\r\n  created() {\r\n\r\n  },\r\n  mounted() {\r\n\r\n    var location1;\r\n    var map = new BMapGL.Map(\"container\");\r\n\r\n    var point = new BMapGL.Point(116.404, 39.915);\r\n    map.centerAndZoom(point, 19);\r\n    map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放\r\n\r\n\r\n\r\n    var scaleCtrl = new BMapGL.ScaleControl();  // 添加比例尺控件\r\n    map.addControl(scaleCtrl);\r\n    var zoomCtrl = new BMapGL.ZoomControl();  // 添加缩放控件\r\n    map.addControl(zoomCtrl);\r\n    var cityCtrl = new BMapGL.CityListControl();  // 添加城市列表控件\r\n    map.addControl(cityCtrl);\r\n    // var geolocation = new BMapGL.Geolocation();\r\n    // geolocation.getCurrentPosition(function(r){\r\n    //   if(this.getStatus() == BMAP_STATUS_SUCCESS){\r\n    //     const province = r.address.province\r\n    //     const city = r.address.city\r\n    //     alert(province)\r\n    //     alert(city)\r\n    //   }\r\n    // });\r\n\r\n    var opts = {\r\n      width: 250,     // 信息窗口宽度\r\n      height: 100,    // 信息窗口高度\r\n      title: \"您的位置信息：\"  // 信息窗口标题\r\n    }\r\n\r\n\r\n\r\n    var geolocation = new BMapGL.Geolocation();\r\n    geolocation.getCurrentPosition(function(r) {\r\n      if (this.getStatus() === BMAP_STATUS_SUCCESS) {\r\n        var mk = new BMapGL.Marker(r.point);\r\n        map.addOverlay(mk);\r\n        map.panTo(r.point);\r\n        // 创建地理编码实例\r\n        var myGeo = new BMapGL.Geocoder();\r\n        // 根据坐标得到地址描述\r\n        myGeo.getLocation(new BMapGL.Point(r.point.lng, r.point.lat), function (result) {\r\n          if (result) {\r\n            location1 = result.address\r\n            localStorage.setItem(\"location\",location1)\r\n            // alert(location1);\r\n           var infoWindow = new BMapGL.InfoWindow(location1, opts);  // 创建信息窗口对象\r\n             map.openInfoWindow(infoWindow, map.getCenter());        // 打开信息窗口\r\n          }\r\n        });\r\n      }\r\n      else {alert('failed:'  +this.getStatus()+\"   \"+\"请检查网络状况!\");}\r\n    });\r\n\r\n\r\n  },\r\n  methods: {\r\n\r\n\r\n  back() {\r\n  },\r\n\r\n\r\n  },\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style type=\"text/css\" scoped >\r\nbody, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:\"微软雅黑\";}\r\n</style>"]},"metadata":{},"sourceType":"module"}